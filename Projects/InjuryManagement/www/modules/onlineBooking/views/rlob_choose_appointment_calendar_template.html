<ion-view title="Add Worker">
    <ion-nav-buttons>
        <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
    <div class="bar bar-subheader">
        <button class="button button-clear button-positive" >
            Back
        </button>
        <h1 class="title">Booking</h1>
    </div>
    <ion-content class="padding has-header has-subheader">
        <ion-list>


            <label  class="item item-input item-select" ng-class="{'has-error':isSubmit && infor.Title.$invalid}">
                <span class="input-label span-input-color">Location</span>
                <select  ng-model="selectedFilter.locationSelected" ng-options="location.Site_name for location in locationsFilter" ng-change="updateAppoinmentsList()">
                    <option  value=""></option>
                </select>
                <i ng-class="{'icon ion-alert-circled error':isSubmit && infor.Title.$invalid}"></i>
            </label>
            <label class="item item-input item-select" ng-class="{'has-error':isSubmit && infor.Title.$invalid}">
                <span class="input-label span-input-color">Doctors</span>
                <select   ng-model="selectedFilter.doctorSelected" ng-options="doctor.NAME for doctor in doctorsFilter" ng-change="updateAppoinmentsList();">
                    <option  value=""></option>
                </select>
                <i ng-class="{'icon ion-alert-circled error':isSubmit && infor.Title.$invalid}"></i>
            </label>

            <label class="item item-input" >
                <span class="input-label span-input-color">Birthday</span>
                <input ng-required="true" type="text" onfocus="this.type='date';
                    this.setAttribute('onfocus','');this.blur();
                        this.focus();" ng-model="selectedFilter.date" name="Date" ng-change="updateAppoinmentsList();" />

            </label>


            <div class="table-responsive" style="margin-top: 20px">
                <div ng-if="appointmentsFilter.length<=0" style="text-align: center">
                    <h4>No Results</h4>

                </div>

                <div ng-repeat="location in appointmentsFilter">
                    <div class="row">
                        <div class="col-md-2" >
                            {{location.SITE_NAME}}
                        </div>
                        <div class="col-md-10" >
                            <div ng-repeat="doctor in location.DOCTOR_ITEMS">
                                <div class="row">
                                    <div class="col-md-2">
                                        {{doctor.DOCTOR_NAME}}
                                    </div>
                                    <div class="col-md-10">
                                        <div ng-repeat="type in doctor.TYPE_ITEMS">
                                            <div class="col-md-2">
                                                {{type.Rl_TYPE_NAME}}
                                            </div>
                                            <div class="col-md-10">
                                                <div ng-repeat="spec in type.SPEC_ITEMS">
                                                    <div class="col-md-2">
                                                        {{spec.Specialties_name}}
                                                    </div>
                                                    <div class="col-md-10" style="border-bottom: 1px solid #dcdcdc;margin-bottom: 10px">
                                                        <a ng-repeat="appointment in spec.APPOINTMENT_ITEMS"
                                                           class="btn btn-sm yellow filter-submit margin-bottom"
                                                           style="margin-left: 10px;margin-bottom: 10px; width: 70px"
                                                           ng-click="selectAppointmentCalendar(appointment,spec.Specialties_id)">
                                                            {{ appointment.APPOINTMENT_TIME }}
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>





        </ion-list>
    </ion-content>


</ion-view>