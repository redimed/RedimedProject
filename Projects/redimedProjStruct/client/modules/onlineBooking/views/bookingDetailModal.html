<div class="modal-header">
</div>
<div class="modal-body">
    <div id="content">
        <table class="table table-bordered table-responsive" cellspacing="0" cellpadding="10" align="center">
            <tbody><tr><td bgcolor="Silver" colspan="4"><b>Booking Details</b></td></tr>
            <tr>
                <td style="border:1px solid gray">Company</td>
                <td colspan="3" style="border:1px solid gray">{{detail.company_name}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">PO Number</td>
                <td colspan="3" style="border:1px solid gray">{{detail.PO_Number}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Project Identification</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Project_Identofication}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Booking Person</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Booking_Person}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Booking Person Contact Number</td>
                <td colspan="3" style="border:1px solid gray">{{detail.contact_number}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Results to</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Result_Email}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Invoices to</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Invoice_Email}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Comments</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Comments}}</td>
            </tr>

            <tr><td bgcolor="Silver" colspan="4"><b>Worker Details</b></td></tr>
            <tr>
                <td style="border:1px solid gray">Name</td>
                <td style="border:1px solid gray">{{detail.Candidates_name}}</td>
                <td style="border:1px solid gray">DOB</td>
                <td style="border:1px solid gray">{{detail.DoB | date:"dd/MM/yyyy"}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Phone</td>
                <td style="border:1px solid gray">{{detail.Phone}}</td>
                <td style="border:1px solid gray">Email</td>
                <td style="border:1px solid gray">{{detail.Email}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Position applied for</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Position}}</td>
            </tr>
            <tr><td bgcolor="Silver" colspan="4"><b>Assessment Details</b></td></tr>
            <tr>
                <td colspan="4" style="border:1px solid gray">
                </td>
            </tr>
            <tr ng-repeat="(head,ass) in detail.ass">
                <td colspan="4" style="border:1px solid gray" >
                    <b>{{head}}</b>
                    <br/>
                    <div ng-repeat="a in ass">
                        <label class="control-label" >
                            &nbsp;&nbsp;{{a.ass_name}}
                        </label>
                        <br/>
                    </div>
                </td>
            </tr>
            <tr><td bgcolor="Silver" colspan="4"><b>Appointment Details</b></td></tr>
            <tr>
                <td style="border:1px solid gray">Appointment location</td>
                <td colspan="3" style="border:1px solid gray">{{detail.site_name}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Appointment time</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Appointment_time | date:'dd/MM/yyyy HH:mm:ss'}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Appointment Notes</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Appointment_notes}}</td>
            </tr>
            <tr>
                <td style="border:1px solid gray">Appointment status</td>
                <td colspan="3" style="border:1px solid gray">{{detail.Appointment_status}}</td>
            </tr>
            </tbody>
        </table>
    </div>

</div>

<div class="modal-footer">
    <a href="javascript:;" class="btn btn-danger" ng-click='cancel()'>Cancel</a>
    <a href="javascript:;" class="btn green" id="btnPrint" >Print</a>
</div>
<script>
    $('#btnPrint').click(function(){
        var pdf = new jsPDF('p', 'pt', 'letter')

        // source can be HTML-formatted string, or a reference
        // to an actual DOM element from which the text will be scraped.
                , source = $('#content')[0]

        // we support special element handlers. Register them with jQuery-style
        // ID selector for either ID or node name. ("#iAmID", "div", "span" etc.)
        // There is no support for any other type of selectors
        // (class, of compound) at this time.
                , specialElementHandlers = {
                    // element with id of "bypass" - jQuery style selector
                    '#bypassme': function(element, renderer){
                        // true = "handled elsewhere, bypass text extraction"
                        return true
                    }
                }

        margins = {
            top: 80,
            bottom: 60,
            left: 40,
            width: 522
        };
        // all coords and widths are in jsPDF instance's declared units
        // 'inches' in this case
        pdf.fromHTML(
                source // HTML string or DOM elem ref.
                , margins.left // x coord
                , margins.top // y coord
                , {
                    'width': margins.width // max width of content on PDF
                    , 'elementHandlers': specialElementHandlers
                },
                function (dispose) {
                    // dispose: object with X, Y of the last line add to the PDF
                    //          this allow the insertion of new lines after html
                    pdf.save('Test.pdf');
                },
                margins
        )
    })
</script>

