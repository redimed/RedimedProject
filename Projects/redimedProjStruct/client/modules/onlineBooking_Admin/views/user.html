<style>
    .selected {
        background-color: rgba(69, 51, 36, 0.36);
    }

</style>
<h3 class="page-title">User Management</h3>
<div class="page-bar">
    <ul class="page-breadcrumb">
        <li>
            <i class="fa fa-home"></i>
            <a ui-sref="loggedIn.home">Home</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a href="javascript:;">System</a>
            <i class="fa fa-angle-right"></i>
        </li>
        <li>
            <a>User Management</a>
        </li>
    </ul>
</div>
<br/>
<div class="portlet grey-cascade box">
    <div class="portlet-title">
        <div class="caption ">
            <i class="icon-list"></i>
            <span class="caption-subject uppercase">User List</span>
        </div>
        <div class="actions">
            <a href="javascript:;" ng-click="addNewUser()" class="btn green-jungle btn-sm">
                <i class="fa fa-plus"></i> Add New</a>
        </div>
    </div>
    <div class="portlet-body form">
        <div class="table-scrollable">
            <table ng-table="tableParams" show-filter="true"  class="table table-bordered table-responsive">
                <tr style="white-space: nowrap" ng-repeat="b in $data" ng-click="showMenu(b)" ng-class="{selected : b.id == selectedId}">
                    <td data-title="'Username'" filter="{ 'user_name': 'text' }" >
                        <a href="javascript:;" ng-click="editUser(b)">{{b.user_name}}</a>
                    </td>
                    <td data-title="'Booking Person'" filter="{ 'Booking_Person': 'text' }">
                        <label>{{b.Booking_Person}}</label>
                    </td>
                    <td data-title="'User Type'"  >
                        <label>{{b.user_type}}</label>
                    </td>
                    <td data-title="'Function'">
                        <label>{{b.FunctionName}}</label>
                    </td>
                    <td data-title="'Company'" >
                        <label>{{b.Company_name}}</label>
                    </td>
                    <td data-title="'Contact No.'" >
                        <label>{{b.Contact_number}}</label>
                    </td>
                    <td data-title="'Invoice Email'"  >
                        <label>{{b.invoiceemail}}</label>
                    </td>
                    <td data-title="'PO Number'" >
                        <label>{{b.PO_number}}</label>
                    </td>
                    <td data-title="'Result Email'"  >
                        <label>{{b.result_email}}</label>
                    </td>
                    <td data-title="'Contact Email'" >
                        <label>{{b.Contact_email}}</label>
                    </td>
                    <td data-title="'Report To Email'"  >
                        <label>{{b.Report_To_email}}</label>
                    </td>
                    <td data-title="'Calendar'" >
                        <input ng-if="b.isCalendar == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isCalendar == 0 || b.isCalendar == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Project Identification'"  >
                        <input ng-if="b.isProject == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isProject == 0 || b.isProject == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Show All'"  >
                        <input ng-if="b.isAll == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isAll == 0 || b.isAll == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Enable'"  >
                        <input ng-if="b.isEnable == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isEnable == 0 || b.isEnable == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'View Booking'"  >
                        <input ng-if="b.isBooking == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isBooking == 0 || b.isBooking == null" type="checkbox"  disabled/>
                    </td>
                    <td data-title="'Make Booking'"  >
                        <input ng-if="b.isMakeBooking == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isMakeBooking == 0 || b.isMakeBooking == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Package'"  >
                        <input ng-if="b.isPackage == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isPackage == 0 || b.isPackage == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Position'"  >
                        <input ng-if="b.isPosition == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isPosition == 0 || b.isPosition == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Setting'"  >
                        <input ng-if="b.isSetting == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isSetting == 0 || b.isSetting == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Download Result'"  >
                        <input ng-if="b.isDownloadResult == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isDownloadResult == 0 || b.isDownloadResult == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'View All Data'"  >
                        <input ng-if="b.isAllCompanyData == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isAllCompanyData == 0 || b.isAllCompanyData == null" type="checkbox" disabled />
                    </td>
                    <td data-title="'Employee'"  >
                        <label>{{b.Employee_Code != null || b.EmployeeFName != null || b.EmployeeLName != null ? b.Employee_Code + ' : '+b.EmployeeFName+' '+b.EmployeeLName : ''}}</label>
                    </td>
                </tr>

            </table>
        </div>

    </div>
</div>
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon icon-users font-blue-hoki"></i>
            <span class="caption-subject font-blue-hoki bold uppercase">Menus</span>
        </div>
        <div>
            <div class="btn-group pull-right">
                <a ng-click="addNewUserMenu()" ng-class="{disabled : selectedId == null}" href="javascript:;" class="btn green" >
                    Add New &nbsp;&nbsp;<i class="fa fa-plus"></i>
                </a>
            </div>
        </div>
    </div>
    <div class="portlet-body form">
        <form name="menuForm" ng-submit="submitUserMenu(menuForm)" method="post" novalidate>
            <div class="form-group">
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-1">
                        <label>Username </label>
                    </div>
                    <div class="col-md-5">
                        <label class="bold">{{info.user_name}}</label>
                    </div>
                </div>
                <br/>
                <div class="form-group" ng-class="{'has-error':showClickedValidation && menuForm.menu.$invalid}">
                    <div class="row">
                        <div class="col-md-4"></div>
                        <div class="col-md-1">
                            <label>Menu <span class="required">
                                                    * </span></label>
                        </div>
                        <div class="col-md-5">
                            <select name="menu"  ng-model="info.menu_id" ng-options="menu.menu_id as menu.description for menu in menuList" class="form-control" required>
                                <option value="">--Select Menu--</option>
                            </select>
                        </div>
                    </div>
                    <div class="row" ng-show="showClickedValidation && menuForm.menu.$invalid">
                        <div class="col-md-4"></div>
                        <div class="col-md-1"></div>
                        <div class="col-md-5">
                            <span for="menu" class="help-block">Menu is required.</span>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-1">
                        <label>Enable </label>
                    </div>
                    <div class="col-md-5">
                        <input ng-class="{disabled : selectedRow == null}"   type="checkbox" ng-model="info.isEnable" ng-true-value="1" ng-false-value="0" />
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-md-4"></div>
                    <div class="col-md-1">
                    </div>
                    <div class="col-md-5">
                        <button ng-class="{disabled : selectedRow == null}" type="submit" class="btn blue">Submit</button>
                    </div>
                </div>
            </div>
        </form>
        <div class="table-scrollable">
            <table ng-table="tableParams2"  class="table table-bordered table-responsive">
                <tr style="white-space: nowrap" align="center" ng-repeat="b in $data" ng-click="showMenuDetails(b)" ng-class="{selected : b.id == selectedRow}">
                    <td data-title="'Username'" >
                        <label>{{b.user_name}}</label>
                    </td>
                    <td data-title="'Menu'" >
                        <label>{{b.MenuTitle}}</label>
                    </td>
                    <td data-title="'User Type'"  >
                        <label>{{b.user_type}}</label>
                    </td>
                    <td data-title="'Enable'"  >
                        <input ng-if="b.isEnable == 1" type="checkbox" checked disabled />
                        <input ng-if="b.isEnable == 0 || b.isEnable == null" type="checkbox" disabled />
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
