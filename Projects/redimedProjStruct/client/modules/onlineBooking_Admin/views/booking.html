<style>
    .selected {
        background-color: #ffca87;
    }
</style>
<div class="caption">
    <div class="row">
        <div class="col-md-12">
            <i class="font-blue-hoki"></i>
            <span class="caption-subject font-blue-hoki bold uppercase" style="font-size: 25px;">Office Site</span>
        </div>
    </div>
</div>
<br/>
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon icon-clock font-blue-hoki"></i>
            <span class="caption-subject font-blue-hoki bold uppercase">Bookings</span>
        </div>
        <div>
            <div class="btn-group pull-right">
                <a href="javascript:;" ng-click="searchModal()"  class="btn grey" >
                    Search &nbsp;&nbsp; <i class="glyphicon glyphicon-search"></i>
                </a>
            </div>
        </div>
    </div>
    <div class="portlet-body form">
        <div class="table-scrollable">
            <table ng-table="tableParams"  class="table table-bordered table-responsive">
                <tr style="white-space: nowrap" align="center" ng-repeat="b in $data" ng-click="showDetail(b)" ng-class="{selected : b.Candidate_id === selectedCanId && b.Booking_id === selectedBookId}">
                    <td data-title="'Company'" >
                        <label>{{b.sub_company_id == null ? b.company_name : b.sub_company_name}}</label>
                    </td>
                    <td data-title="'Candidate Name'" >
                        <a href="javascript:;" ng-click="openDetail(b)">{{b.Candidates_name}}</a>
                    </td>
                    <td data-title="'DOB'"  >
                        <label>{{b.DoB | date:'dd/MM/yyyy'}}</label>
                    </td>
                    <td data-title="'Phone'" >
                        <label>{{b.Phone}}</label>
                    </td>
                    <td data-title="'Email'" >
                        <label>{{b.Email}}</label>
                    </td>
                    <td data-title="'Position'"  >
                        <label>{{b.Position}}</label>
                    </td>
                    <td data-title="'Project Identification'" >
                        <label>{{b.Project_Identofication}}</label>
                    </td>
                    <td data-title="'Comments'"  >
                        <label>{{b.Comments}}</label>
                    </td>
                    <td data-title="'Site Name'" >
                        <label>{{b.site_name}}</label>
                    </td>
                    <td data-title="'Appointment Time'"  >
                        <label>{{b.Appointment_time | date:'dd/MM/yyyy - HH:mm:ss'}}</label>
                    </td>
                    <td data-title="'Appointment Notes'" >
                        <label>{{b.Appointment_notes}}</label>
                    </td>
                    <td data-title="'Appointment Status'"  >
                        <label>{{b.Appointment_status}}</label>
                    </td>
                    <td data-title="'RediMed Notes'"  >
                        <label>{{b.RediMed_note}}</label>
                    </td>
                </tr>

            </table>
        </div>

    </div>
</div>
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption col-md-6">
            <i class="icon icon-clock font-blue-hoki"></i>
            <span class="caption-subject font-blue-hoki bold uppercase">Booking Details</span>
        </div>

        <div>
            <div class="btn-group pull-right">
                <a ng-class="{disabled: isSelected === false}" ng-click="sendEmail()" href="javascript:;" class="btn btn-success" >
                    Send Confirm Email &nbsp;&nbsp; <i class="fa fa-mail-forward"></i>
                </a>
            </div>
        </div>

        <div>
            <div class="btn-group pull-right">
                <a ng-class="{disabled: isSelected === false}" ng-click="saveInfo()" href="javascript:;" class="btn blue" >
                    Save &nbsp;&nbsp; <i class="glyphicon glyphicon-save"></i>
                </a>
            </div>
        </div>


    </div>
    <div class="portlet-body form">
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">CandidateID:</label>
                </div>
                <div class="col-md-8">
                    {{info.Candidate_id}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">BookingID:</label>
                </div>
                <div class="col-md-8">
                    {{info.Booking_id}}
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Booking Person</label>
                </div>
                <div class="col-md-8">
                    {{info.Booking_Person}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Contact Number</label>
                </div>
                <div class="col-md-8">
                    {{info.contact_number}}
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-4">
                    <label class="control-label bold">Comments</label>
                </div>
                <div class="col-md-8 pull-left">
                    {{info.Comments}}
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Project Identification</label>
                </div>
                <div class="col-md-8">
                    {{info.Project_Identofication}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Appointment Status</label>
                </div>
                <div class="col-md-8">
                    <select ng-model="info.Appointment_status">
                        <option value="Pending">Pending</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Reschedule">Reschedule</option>
                        <option value="Cancelled">Cancel</option>
                    </select>
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">From Date</label>
                </div>
                <div class="col-md-8">
                    {{info.from_date | date:'dd/MM/yyyy'}}
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">To Date</label>
                </div>
                <div class="col-md-8">
                    {{info.to_date | date:'dd/MM/yyyy'}}
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Site</label>
                </div>
                <div class="col-md-8">
                    <select ng-model="info.site_id" ng-options="s.id as s.Site_name for s in siteList"></select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Calendar</label>
                </div>
                <div class="col-md-8">
                    <select class="col-md-12 form-control" ng-model="info.calendar_id" name="calendar" required ng-options="cal.cal_id as cal.Site_name + '  ' + (cal.From_time | date:'dd/MM/yyyy HH:mm:ss') + '  ' + cal.available  for cal in calList">
                    </select>
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label style="margin-top: 28px;" class="control-label bold">Appointment Notes</label>
                </div>
                <div class="col-md-8">
                    <input style="margin-top: 28px;" type="text" class="form-control" ng-model="info.Appointment_notes" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4" style="margin-top: 28px;">
                    <label class="control-label bold">Appointment Time</label>
                </div>
                <div class="col-md-4" style="margin-top: 28px;">
                    <input type="text" class="form-control col-md-12" name="fromDate"  datepicker-popup="dd/MM/yyyy" data-ng-model="info.Appointment_time" is-open="openFrom" ng-click="openFrom = true"  datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                </div>
                <div class="col-md-4">
                    <timepicker ng-model="info.Appointment_time"  hour-step="1" minute-step="15" show-meridian="false"></timepicker>
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">REDiMED Notes</label>
                </div>
                <div class="col-md-8">
                    <input type="text" class="form-control" ng-model="info.RediMed_note"  />
                </div>
            </div>
            <div class="col-md-6">
                <div class="col-md-4">
                    <label class="control-label bold">Result File</label>
                </div>
                <div class="col-md-8">
                    <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                        <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i>
                            <span class="fileinput-filename"></span></div>
                        <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span>
                            <input type="file" name="..." ng-model="info.resultFile" app-filereader>
                        </span>
                        <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                    </div>
                </div>
            </div>


            <a class="btn red" download="test.js" href="data:application/x-javascript;base64,dmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CnZhciBhcHAgPSBleHByZXNzKCk7CnZhciBqYXZhID0gcmVxdWlyZSgnamF2YScpOwpqYXZhLm9wdGlvbnMucHVzaCgiLURqYXZhLmF3dC5oZWFkbGVzcz10cnVlIik7CgpqYXZhLmNsYXNzcGF0aC5wdXNoKCdjb21tb25zLWxhbmczLTMuMS5qYXInKTsKamF2YS5jbGFzc3BhdGgucHVzaCgnY29tbW9ucy1pby5qYXInKTsKCmphdmEuY2xhc3NwYXRoLnB1c2goJ2xpYi9jb21tb25zLWJlYW51dGlscy0xLjguMi5qYXInKTsKamF2YS5jbGFzc3BhdGgucHVzaCgnbGliL2NvbW1vbnMtY29sbGVjdGlvbnMtMy4yLjEuamFyJyk7CmphdmEuY2xhc3NwYXRoLnB1c2goJ2xpYi9jb21tb25zLWRpZ2VzdGVyLTIuMS5qYXInKTsKamF2YS5jbGFzc3BhdGgucHVzaCgnbGliL2NvbW1vbnMtbG9nZ2luZy0xLjEuamFyJyk7CmphdmEuY2xhc3NwYXRoLnB1c2goJ2xpYi9ncm9vdnktYWxsLTIuMC4xLmphcicpOwpqYXZhLmNsYXNzcGF0aC5wdXNoKCdsaWIvaVRleHQtMi4xLjcuanMyLmphcicpOwpqYXZhLmNsYXNzcGF0aC5wdXNoKCdsaWIvamFzcGVycmVwb3J0cy01LjYuMC5qYXInKTsKamF2YS5jbGFzc3BhdGgucHVzaCgnbGliL215c3FsLWNvbm5lY3Rvci1qYXZhLTUuMS4xMy1iaW4uamFyJyk7Cgp2YXIgSGFzaE1hcCA9IGphdmEuaW1wb3J0KCdqYXZhLnV0aWwuSGFzaE1hcCcpOwp2YXIgSlJFeGNlcHRpb24gPSBqYXZhLmltcG9ydCgnbmV0LnNmLmphc3BlcnJlcG9ydHMuZW5naW5lLkpSRXhjZXB0aW9uJyk7CnZhciBKYXNwZXJFeHBvcnRNYW5hZ2VyID0gamF2YS5pbXBvcnQoJ25ldC5zZi5qYXNwZXJyZXBvcnRzLmVuZ2luZS5KYXNwZXJFeHBvcnRNYW5hZ2VyJyk7CnZhciBKYXNwZXJGaWxsTWFuYWdlciA9IGphdmEuaW1wb3J0KCduZXQuc2YuamFzcGVycmVwb3J0cy5lbmdpbmUuSmFzcGVyRmlsbE1hbmFnZXInKTsKdmFyIEphc3BlclByaW50ID0gamF2YS5pbXBvcnQoJ25ldC5zZi5qYXNwZXJyZXBvcnRzLmVuZ2luZS5KYXNwZXJQcmludCcpOwp2YXIgRHJpdmVyTWFuYWdlciA9IGphdmEuaW1wb3J0KCdqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyJyk7CnZhciBEcml2ZXIgPSBqYXZhLmltcG9ydCgnY29tLm15c3FsLmpkYmMuRHJpdmVyJyk7CnZhciBJbnB1dFN0cmVhbSA9IGphdmEuaW1wb3J0KCdqYXZhLmlvLklucHV0U3RyZWFtJyk7CnZhciBGaWxlSW5wdXRTdHJlYW0gPSBqYXZhLmltcG9ydCgnamF2YS5pby5GaWxlSW5wdXRTdHJlYW0nKTsKCgp2YXIgU2VxdWVsaXplID0gcmVxdWlyZSgnc2VxdWVsaXplJyk7CnZhciBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKCdzYWtpbGEnLCdyb290Jywncm9vdCcsewogICAgaG9zdDogJ2xvY2FsaG9zdCcsCiAgICBwb3J0OiAzMzA2LAogICAgbWF4Q29uY3VycmVudFF1ZXJpZXM6MTAwLAogICAgcG9vbDp7CiAgICAgICAgbWF4Q29ubmVjdGlvbnM6IDUwLAogICAgICAgIG1heElkbGVUaW1lOiAzMDAwMAogICAgfQp9KTsKCnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKS5jb21wbGV0ZShmdW5jdGlvbihlcnIpewogICAgaWYoISFlcnIpCiAgICB7CiAgICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZTonLGVycik7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3Rpb24gaGFzIGJlZW4gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5IScpOwogICAgfQp9KTsKCi8vRGVmaW5lIFVzZXIgbW9kZWwKdmFyIFVzZXIgPSBzZXF1ZWxpemUuZGVmaW5lKCdVc2VyJywgewogICAgaWQ6IFNlcXVlbGl6ZS5JTlRFR0VSLAogICAgdXNlcl9uYW1lOiBTZXF1ZWxpemUuVEVYVCwKICAgIHBhc3N3b3JkOiBTZXF1ZWxpemUuVEVYVAp9LCB7CiAgICBnZXR0ZXJNZXRob2RzICAgOiB7CiAgICAgICAgaWQgICAgICAgOiBmdW5jdGlvbigpICB7IHJldHVybiB0aGlzLmdldERhdGFWYWx1ZSgnaWQnKSB9LAogICAgICAgIHVuYW1lICA6IGZ1bmN0aW9uKCkgIHsgcmV0dXJuIHRoaXMuZ2V0RGF0YVZhbHVlKCd1c2VyX25hbWUnKSArICcgJyArIHRoaXMuZ2V0RGF0YVZhbHVlKCdwYXNzd29yZCcpIH0KICAgIH0sCiAgICBzZXR0ZXJNZXRob2RzICAgOiB7CgogICAgfSwKICAgIHRhYmxlTmFtZTogJ3VzZXJzJyAvL0Fzc2lnbiBkYXRhIGZyb20gJ3VzZXJzJyB0YWJsZSB0byBVc2VyIG1vZGVsCn0pOwoKYXBwLmdldCgnL3VzZXInLGZ1bmN0aW9uKHJlcSxyZXMpewogICAgLy9SYXcgUXVlcnkKLy8gICAgc2VxdWVsaXplLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIHVzZXJzJykuc3VjY2VzcyhmdW5jdGlvbihycyl7Ci8vICAgICAgIGNvbnNvbGUubG9nKHJzKTsKLy8gICAgfSk7CgogICAgLy9Bc3NpZ24gc2VsZWN0IHJlc3VsdCB0byBkZWZpbmVkIG1vZGVsCiAgICBVc2VyLmZpbmRBbGwoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpewogICAgICAgIGZvcih2YXIgaT0wOyBpPGRhdGEubGVuZ3RoOyBpKyspCiAgICAgICAgewogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhW2ldLmlkICsgJyAnICsgZGF0YVtpXS51bmFtZSk7CiAgICAgICAgfQoKICAgIH0pOwp9KTsKCmFwcC5nZXQoJy9qYXZhJyxmdW5jdGlvbihyZXEscmVzKXsKCiAgICAgICAgdmFyIGNvbiA9IGphdmEuY2FsbFN0YXRpY01ldGhvZFN5bmMoJ2phdmEuc3FsLkRyaXZlck1hbmFnZXInLCdnZXRDb25uZWN0aW9uJywiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L3Nha2lsYSIsInJvb3QiLCJyb290Iik7CgogICAgICAgIHZhciBwYXJhbU1hcCA9IG5ldyBIYXNoTWFwKCk7CgogICAgICAgIHBhcmFtTWFwLnB1dFN5bmMoImlkIiw3KTsKICAgICAgICBwYXJhbU1hcC5wdXRTeW5jKCJyZWFsUGF0aCIsInJlcG9ydHMvIik7CgoKICAgICAgICB2YXIgalByaW50ID0gamF2YS5jYWxsU3RhdGljTWV0aG9kU3luYygnbmV0LnNmLmphc3BlcnJlcG9ydHMuZW5naW5lLkphc3BlckZpbGxNYW5hZ2VyJywnZmlsbFJlcG9ydCcsJ3JlcG9ydHMvR29yZ29uRkNBUmVwb3J0Lmphc3BlcicscGFyYW1NYXAsY29uKTsKCiAgICAgICAgamF2YS5jYWxsU3RhdGljTWV0aG9kU3luYygnbmV0LnNmLmphc3BlcnJlcG9ydHMuZW5naW5lLkphc3BlckV4cG9ydE1hbmFnZXInLCdleHBvcnRSZXBvcnRUb1BkZkZpbGUnLGpQcmludCwnc2FtcGxlLnBkZicpOwoKICAgICAgICByZXMuZG93bmxvYWQoJ3NhbXBsZS5wZGYnKTsKCn0pOwoKCnZhciBzZXJ2ZXIgPSBhcHAubGlzdGVuKDQwMDAsZnVuY3Rpb24oKXsKICAgIGNvbnNvbGUubG9nKCdMaXN0ZW5pbmcgb24gcG9ydCAlZCcsIHNlcnZlci5hZGRyZXNzKCkucG9ydCk7Cn0pOwo=">download</a>
        </div>
    </div>
</div>
<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon icon-clock font-blue-hoki"></i>
            <span class="caption-subject font-blue-hoki bold uppercase">Assessment Details</span>
        </div>
    </div>
    <div class="portlet-body form">
        <div class="form-group row" ng-repeat="(head,ass) in packAss ">
            <div class="col-md-8">
                <b>{{head}}</b>
                <br/>
                <div ng-repeat="a in ass">
                    <label class="control-label" >
                        &nbsp;&nbsp;{{a.ass_name}}
                    </label>
                    <br/>
                </div>

            </div>
        </div>
    </div>
</div>
