<div class="col-md-12">
	<ul class="un-tabs">
		<li ng-repeat="doctor in appointment.doctors" 
			ng-class="{'active': doctor.DOCTOR_ID.toString()===appointment.pre.doctor_id.toString()}"
			ng-click="goToOtherDoctor(doctor)">
			<a>{{doctor.NAME}}</a>
		</li>
	</ul>
	<div class="un-tabs-content">
		<div class="un-tab-content active">
			<div id="appointment">
				<div class="row" style="margin-bottom: 10px;">
					<!-- DATEPICKER -->
					<div class="col-md-4">
						<div class="form-group">
							<label class="un-label-header un-bgWhite">Datepicker</label>
							<div class="un-div-content un-bgWhite-boxshadow-bottom">
								<input custom-date ng-model="appointment.pre.datepicker" ng-change="loadAppointment()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
							</div>
						</div>
					</div>
					<style type="text/css">
						.un_group_black_header{
							z-index: 0;
						}
					</style>
					<!-- END DATEPICKER -->

					<!-- REDIMEDSITE -->
					<div class="col-md-4">
						<div class="form-group">
							<label class="un-label-header un-bgWhite">Redimed Site</label>
							<div class="un-div-content un-bgWhite-boxshadow-bottom">
					        	<select ng-options="s.id as s.Site_name for s in site.list" ng-model="appointment.pre.site_id"
								ng-change="loadAppointment()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
								</select>	
					        </div>
						</div>
					</div>
					<!-- END REDIMEDSITE -->

					<!-- CLINICAL DEPT -->
					<div class="col-md-4">
						<div class="form-group">
							<label class="un-label-header un-bgWhite">Clinical Dept</label>
							<div class="un-div-content un-bgWhite-boxshadow-bottom">
								<select ng-options="c.CLINICAL_DEPT_ID as c.CLINICAL_DEPT_NAME for c in clinicalDept.list" 
								ng-model="appointment.pre.clinical_dept_id"
								class="form-control"
								ng-change="loadAppointment()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
									<option value="">All</option>
								</select>
							</div>
						</div>
					</div>
					<!-- END CLINICAL DEPT -->
				</div>
				<div class="row">
					<div class="col-md-12">
						<table class="table">
							<tr>
								<th>From</th>
								<th>To</th>
								<th>Patients</th>
								<th>Status</th>
								<th>Service</th>
							</tr>
							<tr ng-repeat="l in appointment.list">
								<td>{{l.FROM_TIME}}</td>
								<td>{{l.TO_TIME}}</td>
								<td>
									<span ng-if="l.patients.length > 0">
										<p ng-repeat="patient in l.patients" ng-right-click="onRightClick($event, l, patient)">
											<b ng-if="patient.Patient_id" 
												style="cursor: pointer;">
												<span ng-click="goToAppDetail(l, patient)">{{patient.First_name}} {{patient.Sur_name}}</span>
												&nbsp;
												<a ng-click="showDropdown(patient, col)">
													<i class="fa fa-caret-right"></i>
												</a>
											</b>
											<b ng-if="!patient.Patient_id" style="cursor: pointer;"
												ng-click="dialogAppointmentAdd(l, patient)">
												No Patient
											</b>
										</p>
									</span>
								</td>
								<td>{{l.STATUS}}</th>
								<td>
									<div style="width: 20px; height: 20px; background-color: {{l.SERVICE_COLOR}}">
									</div>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	
</div>


<!-- RIGHT CLICK DROPDOWN MENU -->
<ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="popupMenu">
	<li>
		<a ng-click="rightAdd(appointment.selectedAppointment, appointment.selectedCol)">
			Make new Booking
		</a>
		<a ng-click="dialogWaitingListAdd(appointment.selectedCol)">
			Add Waiting List
		</a>
	</li>
</ul>
<!-- END RIGHT CLICK DROPDOWN MENU -->

<script type="text/ng-template" id="waitingListAdd">
	<div class="modal-body">
		<waiting-list-add success="success" doctor-id="doctor_id"></waiting-list-add>
	</div>
</script>

<script type="text/ng-template" id="appointmentAdd">
	<div class="modal-body">
		<appointment-add params="appointment" patient="patient" options="options"></appointment-add>
	</div>
</script>

<script type="text/ng-template" id="patientAdd">
	<div class="modal-body">
		<patient-detail options="options" params="params" onsuccess="onsuccess" patient="onsuccess"></patient-detail>
	</div>
</script>

<script type="text/ng-template" id="patientList">
	<div class="modal-body">	
		<patient-search click-row="clickRow(row)"></patient-search>
	</div>
</script>

<script type="text/ng-template" id="waitingListSelect">
	<div class="modal-body">	
		<waiting-list-list click-row="clickRow(row)"></waiting-list-list>
	</div>
</script>

<script type="text/ng-template" id="notifyClaim">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addClaim()">Add</button> or&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="selectClaim()">Select</button> claim ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

 <script type="text/ng-template" id="notifyReferral">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addReferral()">Add</button>
        	or <button class="btn btn-primary btn-xs" ng-click="selectReferral()">Select</button> referral ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

<script type="text/ng-template" id="notifyAppointment">
	<div class="modal-body">
	    <p>
	    	Do you want to really choose this patient ???
	    </p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary btn-xs" ng-click="clickYes()">I am sure</button>
	    <button class="btn btn-warning btn-xs" ng-click="clickNo()">Cancel</button>
	</div>
</script>

<script type="text/ng-template" id="claimAdd">
	<div class="modal-body">	
		<claim-patient-add patient-id="claim.Patient_id" cal-id="claim.CAL_ID" success="claim.success"></claim-patient-add>
	</div>
</script>

<script type="text/ng-template" id="claimSelect">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">	
		<claim-patient-list limit="claim.limit" reload="claim.reload" patient-id="claim.Patient_id" without-patient="true" add-success="claim.addSuccess"
			cal-id="claim.CAL_ID"
			permission="{edit: false, remove: false, add: true}" on-row-click="claim.clickRow(row)">
		</claim-patient-list>
	</div>
</script>

<script type="text/ng-template" id="referralAdd">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">	
		<outreferral-patient-add patient-id="patientId" cal-id="calId" success="success" doctor-id="doctorId">
		</outreferral-patient-add>
	</div>
</script>

<script type="text/ng-template" id="referralSelect">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">
		<outreferral-patient-list reload="reload" limit="limit" add-success="addSuccess"
			doctor-id="doctorId"
			cal-id="calId"
			patient-id="patientId" without-patient="true" on-row-click="clickRow(row)"
			permission="{edit: false, remove: false, add: true}">
		</outreferral-patient-list>
	</div>
</script>

<script type="text/ng-template" id="notifyAlert">
	<div class="modal-body">
		<p>{{outreferral.name}}</p>
		<h4>Alert List</h4>
		<ul>
			<li ng-repeat="l in alert.list">{{l.name}} ({{l.description}})</li>
		</ul>
	</div>
</script>