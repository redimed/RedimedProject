<style>
	.img-profile{
	  position: relative;
	  top: 50%;
	    -webkit-transform: translateY(-50%);
	    -ms-transform: translateY(-50%);
	    transform: translateY(-50%);
	}
	.appt-profile {
	    position: relative;
	    padding: 9px !important;
	}

	.appt-profile .corner {
	    position: absolute;
	    top: 5;
	    right: 10;
	}

	.panel{
    	margin-bottom: 0px;
    	position: fixed;
	     bottom: 0;
	     right: 0;
	     width: 350px !important;
	}

	.icon_minim{
	    padding:2px 10px;
	}
	.msg_container_base{
	  background: #e5e5e5;
	  margin: 0;
	  padding: 0 10px 10px;
	  max-height:300px;
	  overflow-x:hidden;
	}
	.top-bar {
	  background: #666;
	  color: white;
	  padding: 10px;
	  position: relative;
	  overflow: hidden;
	}

	.msg_container_base::-webkit-scrollbar-track
	{
	    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	    background-color: #F5F5F5;
	}

	.msg_container_base::-webkit-scrollbar
	{
	    width: 12px;
	    background-color: #F5F5F5;
	}

	.msg_container_base::-webkit-scrollbar-thumb
	{
	    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	    background-color: #555;
	}
</style>
<div class="row">
	<div class="col-md-10">
		<!--<p ng-repeat="service in servicedata" ng-if="servicedata.length > 0" class="inline">-->
		<p ng-repeat="service in servicedata" ng-if="servicedata.length > 0" class="inline" ng-click="changeService(service.SERVICE_ID)"> 
			<button ng-style="{'background-color': '{{service.SERVICE_COLOR}}'}" style="height: 20px;width: 20px;"></button>
			<span> {{service.SERVICE_NAME}}  </span>
		<p>
	</div>
	<div class="col-md-2">
	<button class="un-button un-bgBlack pull-right un-margin-bottom-6px" ng-click="addPatient()">Add Patient</button>
	</div>
</div>
<div class="panel panel-default">
    <div class="panel-heading top-bar">
        <div class="col-md-8 col-xs-8">
            <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Notification List</h3>
        </div>
        <div class="col-md-4 col-xs-4" style="text-align: right;">
            <a href="javascript:;"><span id="minim_chat_window" class="glyphicon glyphicon-minus icon_minim"></span></a>
        </div>
    </div>
    <div class="panel-body msg_container_base">
       <div ng-if="list.test !== 0 || list.alert.length !== 0" class="un_body_notification_list" ng-repeat="list in alertCenter.list">
	       <div class="panelo">
	    		<div>
            		<span ng-if="list.alert.length > 0 || list.cal.length > 0" style="font-size: 16px;font-weight: bold;">
				        <a href="javascript:;" style="text-decoration: none;"><span id="minim_chat_window" class="icon_minims">{{list.First_name}} {{list.Sur_name}}</span></a>
				    </span>
				</div>
				<div class="panelor">
					<ul ng-repeat="alert in list.alert" ng-if="list.alert.length > 0">
				        <li style="color: {{alert.color}};">
				        	{{alert.name}} <input type="checkbox" ng-checked="alert.Check" ng-true-value=1 ng-false-value=0 ng-click="alertCenter.onCheck(alert)" />
				        	<span style="font-weight: bold" ng-if="alert.User != null">{{' - ' + alert.User}}</span>
				        	<span ng-if="alert.Check==0 && alert.isUser==0 && alert.User == null "></span>
				        </li>
				    </ul>
				    <p ng-repeat="cal in list.cal" ng-if="list.cal.length > 0 && list.test === 1">
				        <span ng-if="cal.IS_REFERRAL && cal.OUTREFERRAL === 'no'" style="margin-left: 10px;">
				            {{cal.FROM_TIME}}-{{cal.TO_TIME}}:&nbsp
				            There is no referral
				        </span>
				    </p>
				</div>
			</div>
       		<!--<span ng-if="list.alert.length > 0 || list.cal.length > 0" style="font-size: 16px;font-weight: bold;">
		        {{list.First_name}} {{list.Sur_name}}
		    </span>
	    	<div collapse="isCollapsed">
			    <ul ng-repeat="alert in list.alert" ng-if="list.alert.length > 0">
			        <li style="color: {{alert.color}};">
			        	{{alert.name}} <input type="checkbox" ng-checked="alert.Check" ng-true-value=1 ng-false-value=0 ng-click="alertCenter.onCheck(alert)" />
			        	<span style="font-weight: bold">{{' - ' + alert.User}}</span>
			        	<span ng-if="alert.Check==0 && alert.isUser==0"></span>
			        </li>
			    </ul>
			    <p ng-repeat="cal in list.cal" ng-if="list.cal.length > 0 && list.test === 1">
			        <span ng-if="cal.IS_REFERRAL && cal.OUTREFERRAL === 'no'" style="margin-left: 10px;">
			            {{cal.FROM_TIME}}-{{cal.TO_TIME}}:&nbsp
			            There is no referral
			        </span>
			    </p>
			</div>-->
	    </div>
	    <div ng-if="alertCenter.list.length == 0">
	    	<div style="text-align: center;">
                <span style="font-size: 15px; font-style: italic;font-weight: bold;">      
                    Empty Data
                </span>
            </div>
	    </div>
    </div>
</div>
</div>
<!-- <div id="appointment" style="overflow-x: scroll;" ng-right-click="isshiftRight($event)"> -->
<div id="appointment" style="overflow-x: scroll;"> 
	<div class="row">
		<!-- DATEPICKER -->
		<div class="col-md-4">
			<div class="form-group">
				<label class="un-label-header un-bgWhite">Datepicker</label>
				<div class="un-div-content un-bgWhite-boxshadow-bottom">
					<input custom-date ng-model="appointment.search.datepicker" ng-change="appointment.load()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
				</div>
			</div>
		</div>
		<style type="text/css">
			.un_group_black_header{
				z-index: 0;
			}
		</style>
		<!-- END DATEPICKER -->

		<!-- REDIMEDSITE -->
		<div class="col-md-4">
			<div class="form-group">
				<label class="un-label-header un-bgWhite">Redimed Site</label>
				<div class="un-div-content un-bgWhite-boxshadow-bottom">
		        	<select ng-options="s.id as s.Site_name for s in site.list" ng-model="appointment.search.site_id"
					ng-change="appointment.load()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
					</select>	
		        </div>
			</div>
		</div>
		<!-- END REDIMEDSITE -->

		<!-- CLINICAL DEPT -->
		<div class="col-md-4">
			<div class="form-group">
				<label class="un-label-header un-bgWhite">Clinical Dept</label>
				<div class="un-div-content un-bgWhite-boxshadow-bottom">
					<select ng-options="c.CLINICAL_DEPT_ID as c.CLINICAL_DEPT_NAME for c in clinicalDept.list" 
					ng-model="appointment.search.clinical_dept_id"
					class="form-control"
					ng-change="appointment.load()" style="width: 100%; border: 0;" class="form-control un-padding-right-top-bottom-10-left-15">
						<option value="">All</option>
					</select>
				</div>
			</div>
		</div>
		<!-- END CLINICAL DEPT -->
	</div>
	<div class="appointment" style="width: 140%;">
		<div class="appointment-row">
			<div class="appointment-block-times" style="background: rgb(96, 99, 94)">
				<label style="color: #ffffff; font-weight: bold;">Times</label>
			</div>
			<div class="appointment-block-header" ng-repeat="doctor in doctor.headers">
					<label style="color: #ffffff; margin-bottom: 0; padding-top: 10px; padding-bottom: 15px; padding-left: 10px; padding-right: 10px; font-weight: bold; background: rgb(96, 99, 94)"
						ng-click="goToCalendarDetail(doctor)">
						{{doctor.NAME}}
					</label>
			</div>
		</div>
		<div class="appointment-row" ng-repeat="app in appointment.list">
			<div class="appointment-block-time">{{app.FROM_TIME}}</div>

			<div class="appointment-block" ng-repeat="col in app.doctors" ng-class="{'block-active': col.PATIENTS !== '###'}"
				id="appointment-{{col.CAL_ID}}"
				ng-style="{'background-color': '{{col.SERVICE_COLOR}}', 'margin-bottom': col.margin === 'yes' ? '3px': '0px', 'height': col.height, 'border-top': col.border === 'yes' ? '1px solid rgb(96, 99, 94)': '0px'}" ng-click="isKeyPressed($event)" ng-right-click="rightClickChangeColor()"> 
				<span ng-if="col.PATIENTS === 'MESS_SYS_010'" ><a ng-click="appointment.dialog.add(app, col)">No Patient <span class="appid">{{col.CAL_ID}}</span></a>
				</span>
				<span ng-if="col.PATIENTS === '###'">
					
				</span>
				<span ng-if="col.PATIENTS === 'ok'">
					<span ng-repeat="patient in col.patients">
						<a ng-click="goToAppDetail(col.CAL_ID, patient.Patient_id)"
							ng-right-click="appointment.onRightClick($event, app, col, patient)">
							<span class="appid" style="display:none">{{col.CAL_ID}}</span>
							<span class="patient_name">{{patient.First_name}} {{patient.Sur_name}}</span>
							&nbsp;
							<a ng-click="showDropdown(patient, col)">
								<i class="fa fa-caret-right"></i>
							</a>
						</a>
						<span ng-if="col.patients.length > 1 && $index < col.patients.length-1">
							<br/>
						</span>
					</span>
				</span>
			</div>
		</div>
	</div> <!-- END APPOINTMENT -->
</div>
<!-- RIGHT CLICK DROPDOWN MENU -->
<!-- <ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="calMenu">
	<div>
        <table class="responsive table table-bordered" style="margin-bottom: 0px !important;">
            <thead>
                <tr>
                    <th class="un_table_tab_bg">
                        <div class="th">
                            <span style="color: white;">Name</span>
                        </div>
                    </th>
                    <th class="un_table_tab_bg">
                        <div class="th">
                            <span style="color: white;">Calendar id</span>
                        </div>
                    </th>
                    <th class="un_table_tab_bg">
                        <div class="th">
                            <span style="color: white;">Appointment status</span>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr style="background-color: white;" class="bold" ng-repeat="list in arrayAppid">
                    <td style="vertical-align: middle; padding: 5px;">
                        <label style="max-width: 110px;min-width: 110px;">
                            {{list.patient_name}}
                        </label>
                    </td>
                    <td style="vertical-align: middle; padding: 5px;">
                        <label style="height: 20px;overflow: hidden; max-width: 325px;">
                            {{list.CAL_ID}}
                        </label>
                    </td>
                    <td style="vertical-align: middle; padding: 5px;">
                        <label style="height: 20px;overflow: hidden; max-width: 325px;">
                            {{list.appt_status}}
                        </label>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</ul> -->
<!-- END RIGHT CLICK DROPDOWN MENU -->
<ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="calMenu">
	<li>
	<i class="fa fa-times" style="margin-left: 100% !important;margin-top: -7%;" ng-click="cancelCalMenu($event)"></i>
		<a ng-click="showChangeStatus($event)">
			ChangeStatus
		</a>
		<a ng-click="">
			Other
		</a>
	</li>
</ul>
<ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="changeStatus">
 <table class="responsive table table-bordered" style="margin-bottom: 0px !important;">
    <thead>
    	<i class="fa fa-times" style="margin-left: 100% !important;margin-top: -7%;" ng-click="cancel($event)"></i>
        <tr>
            <th class="un_table_tab_bg" style="background-color: black !important;">

                <div class="th">
                    <span style="color: white;">Change Status</i></span>
                </div>
            </th>
        </tr>
    </thead>
    </table>
	<li>
		<a ng-click="changeStatus('Confirmed')">
			Confirmed
		</a>
		<a ng-click="changeStatus('Pending')">
			Pending
		</a>
		<a ng-click="changeStatus('Reschedule')">
			Reschedule
		</a>
		<a ng-click="changeStatus('Cancel')">
			Cancel
		</a>
	</li>
</ul>
<!-- RIGHT CLICK DROPDOWN MENU -->
<ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="popupMenu">
	<li>
		<a ng-click="appointment.dialog.rightAdd(appointment.selectedAppointment, appointment.selectedCol)">
			Make new Booking
		</a>
		<a ng-click="appointment.dialog.chooseWaitingList(appointment.selectedCol)">
			Add Waiting List
		</a>
	</li>
</ul>
<!-- END RIGHT CLICK DROPDOWN MENU -->

<script type="text/ng-template" id="waitingListAdd">
	<div class="modal-body">
		<waiting-list-add success="success" doctor-id="doctor_id" patient-id="patient_id"></waiting-list-add>
	</div>
</script>

<script type="text/ng-template" id="appointmentAdd">
	<div class="modal-body">
		<appointment-add params="appointment" search="search" patient="patient" options="options"></appointment-add>
	</div>
</script>

<script type="text/ng-template" id="patientAdd">
	<div class="modal-body">
		<patient-detail options="options" params="params" onsuccess="onsuccess" patient="onsuccess"></patient-detail>
	</div>
</script>

<script type="text/ng-template" id="patientList">
	<div class="modal-body">	
		<patient-search click-row="clickRow(row)"></patient-search>
	</div>
</script>

<script type="text/ng-template" id="waitingListSelect">
	<div class="modal-body">	
		<waiting-list-list click-row="clickRow(row)"></waiting-list-list>
	</div>
</script>

<script type="text/ng-template" id="notifyClaim">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addClaim()">Add</button> or&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="selectClaim()">Select</button> claim ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

 <script type="text/ng-template" id="notifyReferral">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addReferral()">Add</button>
        	or <button class="btn btn-primary btn-xs" ng-click="selectReferral()">Select</button> referral ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

<script type="text/ng-template" id="notifyAppointment">
	<div class="modal-body">
	    <p>
	    	Do you want to really choose this patient ???
	    </p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary btn-xs" ng-click="clickYes()">I am sure</button>
	    <button class="btn btn-warning btn-xs" ng-click="clickNo()">Cancel</button>
	</div>
</script>

<script type="text/ng-template" id="claimAdd">
	<div class="modal-body">	
		<claim-patient-add patient-id="claim.Patient_id" cal-id="claim.CAL_ID" success="claim.success"></claim-patient-add>
	</div>
</script>

<script type="text/ng-template" id="claimSelect">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">	
		<claim-patient-list limit="claim.limit" reload="claim.reload" patient-id="claim.Patient_id" without-patient="true" add-success="claim.addSuccess"
			cal-id="claim.CAL_ID"
			permission="{edit: false, remove: false, add: true}" on-row-click="claim.clickRow(row)">
		</claim-patient-list>
	</div>
</script>

<script type="text/ng-template" id="referralAdd">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">	
		<outreferral-patient-add patient-id="patientId" cal-id="calId" success="success" doctor-id="doctorId">
		</outreferral-patient-add>
	</div>
</script>

<script type="text/ng-template" id="referralSelect">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">
		<outreferral-patient-list reload="reload" limit="limit" add-success="addSuccess"
			doctor-id="doctorId"
			cal-id="calId"
			patient-id="patientId" without-patient="true" on-row-click="clickRow(row)"
			permission="{edit: false, remove: false, add: true}">
		</outreferral-patient-list>
	</div>
</script>

<script type="text/ng-template" id="notifyAlert">
	<div class="modal-body">
		<p>{{outreferral.name}}</p>
		<h4>Alert List</h4>
		<ul>
			<li ng-repeat="l in alert.list">{{l.name}} ({{l.description}})</li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="addPatient">
	<style type="text/css">
          .modal.in .modal-dialog {
           margin-top:50px;
          }
    </style>
	<div class="modal-body">
		<patient-detail options="options" params="patientAddForm.params" onsuccess="onsuccess"/>
	</div>
</script>
<script>
	$(document).on('click', '.panel-heading span.icon_minim', function (e) {
	    var $this = $(this);
	    if (!$this.hasClass('panel-collapsed')) {
	        $this.parents('.panel').find('.panel-body').slideUp();
	        $this.addClass('panel-collapsed');
	        $this.removeClass('glyphicon-minus').addClass('glyphicon-plus');
	    } else {
	        $this.parents('.panel').find('.panel-body').slideDown();
	        $this.removeClass('panel-collapsed');
	        $this.removeClass('glyphicon-plus').addClass('glyphicon-minus');
	    }
	});
	$(document).on('click', '.panelo span.icon_minims', function (e) {
	    var $this = $(this);
	    if (!$this.hasClass('panel-collapsed')) {
	        $this.parents('.panelo').find('.panelor').slideUp();
	        $this.addClass('panel-collapsed');
	    } else {
	        $this.parents('.panelo').find('.panelor').slideDown();
	        $this.removeClass('panel-collapsed');
	    }
	});
</script>
<script type="text/ng-template" id="CheckAlert">
	<div class="modal-body">
	    <p>
	    	Have already ???
	    </p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary btn-xs" ng-click="clickYes()">Yes</button>
	    <button class="btn btn-warning btn-xs" ng-click="clickNo()">No</button>
	</div>
</script>