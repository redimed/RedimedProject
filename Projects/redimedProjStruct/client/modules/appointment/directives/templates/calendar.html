<div id="alert-center" class="bv-right-list">
	<h3>Notification List</h3>
	<hr>
	<span ng-repeat="list in alertCenter.list">
		<h4 ng-if="(list.IS_REFERRAL && list.outreferral_id === 'no')">
			{{list.First_name}} {{list.Sur_name}}
			({{list.FROM_TIME}} - {{list.TO_TIME}})
		</h4>
		<!--<ul ng-repeat="alert in list.alert" ng-if="list.alert.length > 0">
			<li>{{alert.name}}</li>
		</ul>-->
		<p ng-if="list.IS_REFERRAL">
			<b ng-if="list.outreferral_id === 'no'">There is no referral. Please make referral</b>
		</p>
	</span>
</div>
<div class="bv-arrow" ng-click="clickArrow()"></div>

<div id="appointment">
	<div class="row">
		<!-- DATEPICKER -->
		<div class="col-md-4">
			<div class="form-group">
				<label>Datepicker</label>
				<input custom-date ng-model="appointment.search.datepicker" ng-change="appointment.load()" class="form-control">
			</div>
		</div>
		<!-- END DATEPICKER -->

		<!-- REDIMEDSITE -->
		<div class="col-md-4">
			<div class="form-group">
				<label>Redimed Site</label>
				<select ng-options="s.id as s.Site_name for s in site.list" ng-model="appointment.search.site_id"
					ng-change="appointment.load()" class="form-control">
				</select>
			</div>
		</div>
		<!-- END REDIMEDSITE -->

		<!-- CLINICAL DEPT -->
		<div class="col-md-4">
			<div class="form-group">
				<label>Clinical Dept</label>
				<select ng-options="c.CLINICAL_DEPT_ID as c.CLINICAL_DEPT_NAME for c in clinicalDept.list" 
					ng-model="appointment.search.clinical_dept_id"
					class="form-control"
					ng-change="appointment.load()">
					<option value="">All</option>
				</select>
			</div>
		</div>
		<!-- END CLINICAL DEPT -->
	</div>

	<div class="appointment">
		<div class="appointment-row" style="margin-bottom: 10px;">
			<div class="appointment-block-time"></div>
			<div class="appointment-block-header" ng-repeat="doctor in doctor.headers">
				{{doctor.NAME}}
			</div>
		</div>
		<div class="appointment-row" ng-repeat="app in appointment.list">
			<div class="appointment-block-time">{{app.FROM_TIME}}</div>
			<div class="appointment-block" ng-repeat="col in app.doctors" ng-class="{'block-active': col.PATIENTS !== '###'}"
				id="appointment-{{col.CAL_ID}}" ng-right-click="appointment.onRightClick($event, app, col)"
				ng-style="{'background-color': '{{col.SERVICE_COLOR}}'}">
				<span ng-if="col.PATIENTS === 'MESS_SYS_010'">
					<a ng-click="appointment.dialog.add(app, col)">No Patient {{col.CAL_ID}}</a>
				</span>
				<span ng-if="col.PATIENTS === '###'">
					{{col.PATIENTS}}
				</span>
				<span ng-if="col.PATIENTS === 'ok'">
					<span ng-repeat="patient in col.patients">
						<a ng-click="goToAppDetail(col.CAL_ID, patient.Patient_id)">
							<span>
								{{patient.First_name}} {{patient.Sur_name}}
							</span>
							&nbsp;
							<a ng-click="showDropdown(patient, col)">
								<i class="fa fa-caret-right"></i>
							</a>
						</a>
						<br>
					</span>
				</span>
			</div>
		</div>
	</div> <!-- END APPOINTMENT -->
</div>

<!-- RIGHT CLICK DROPDOWN MENU -->
<ul class="dropdown-menu" style="display: none; z-index: 9998; position: absolute; top: 0; left: 0;" id="popupMenu">
	<li>
		<a ng-click="appointment.dialog.rightAdd(appointment.selectedAppointment, appointment.selectedCol)">
			Make new Booking
		</a>
	</li>
	<!--<li><a ng-click="addWaitingList()">Add Waiting List</a></li>
	<li><a ng-click="openWaitingList()">Select Waiting List</a></li>
	<li><a ng-click="cancelStatus(rightSelectedBooking.data, rightSelectedBooking.overId, rightSelectedBooking.docId)">
		Cancel Status</a></li>-->
</ul>
<!-- END RIGHT CLICK DROPDOWN MENU -->

<script type="text/ng-template" id="appointmentAdd">
	<div class="modal-body">	
		<appointment-add params="appointment" patient="patient" options="options"></appointment-add>
	</div>
</script>

<script type="text/ng-template" id="patientAdd">
	<div class="modal-body">
		<patient-detail options="options" params="params" onsuccess="onsuccess" patient="onsuccess"></patient-detail>
	</div>
</script>

<script type="text/ng-template" id="patientList">
	<div class="modal-body">	
		<patient-search click-row="clickRow(row)"></patient-search>
	</div>
</script>

<script type="text/ng-template" id="notifyClaim">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addClaim()">Add</button> or&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="selectClaim()">Select</button> claim ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

 <script type="text/ng-template" id="notifyReferral">
    <div class="modal-body">
        <p>
        	Do you want to&nbsp;
        	<button class="btn btn-primary btn-xs" ng-click="addReferral()">Add</button>
        	or <button class="btn btn-primary btn-xs" ng-click="selectReferral()">Select</button> referral ?
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
 </script>

<script type="text/ng-template" id="notifyAppointment">
	<div class="modal-body">
	    <p>
	    	Do you want to really choose this patient ???
	    </p>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary btn-xs" ng-click="clickYes()">I am sure</button>
	    <button class="btn btn-warning btn-xs" ng-click="clickNo()">Cancel</button>
	</div>
</script>

<script type="text/ng-template" id="claimAdd">
	<div class="modal-body">	
		<claim-patient-add patient-id="claim.Patient_id" cal-id="claim.CAL_ID" success="claim.success"></claim-patient-add>
	</div>
</script>

<script type="text/ng-template" id="claimSelect">
	<div class="modal-body">	
		<claim-patient-list limit="claim.limit" reload="claim.reload" patient-id="claim.Patient_id" without-patient="true" add-success="claim.addSuccess"
			cal-id="claim.CAL_ID"
			permission="{edit: false, remove: false, add: true}" on-row-click="claim.clickRow(row)">
		</claim-patient-list>
	</div>
</script>

<script type="text/ng-template" id="referralAdd">
	<div class="modal-body">	
		<outreferral-patient-add patient-id="patientId" cal-id="calId" success="success">
		</outreferral-patient-add>
	</div>
</script>

<script type="text/ng-template" id="referralSelect">
	<div class="modal-body">	
		<outreferral-patient-list reload="reload" limit="limit" add-success="addSuccess"
			patient-id="patientId" without-patient="true" on-row-click="clickRow(row)"
			permission="{edit: false, remove: false, add: true}">
		</outreferral-patient-list>
	</div>
</script>

<script type="text/ng-template" id="notifyAlert">
	<div class="modal-body">
		<p>{{outreferral.name}}</p>
		<h4>Alert List</h4>
		<ul>
			<li ng-repeat="l in alert.list">{{l.name}} ({{l.description}})</li>
		</ul>
	</div>
</script>