<div class="panel panel-primary">
	<div class="panel-heading">
		Casual Calendar
	</div>
	<div class="panel-body">
		<div class="form-group">
            <label class="control-label col-md-2 col-sm-2 col-xs-6">
                From Time
                <span class="required"> * </span>
            </label>
            <div class="col-md-2 col-sm-2 col-xs-6">
                <input placeholder="From Time" ng-model="objectMap.from_time" 
                	name="from_time" class="form-control" ui-date="{dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true,yearRange:'c-20:c+20'}" > <!-- ng-change="getAppointments()" -->
            </div>
             <label class="control-label col-md-2 col-sm-2 col-xs-6">
                To Time
                <span class="required"> * </span>
            </label>
            <div class="col-md-2 col-sm-2 col-xs-6">
                <input placeholder="To Time" ng-model="objectMap.to_time" 
                    name="to_time" class="form-control" ui-date="{dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true,yearRange:'c-20:c+20'}" ><!-- ng-change="getAppointments()" -->
            </div>
            <div class="col-md-2 col-sm-2 col-xs-6">
                <button class="btn btn-info form-control rlob_button_search" ng-click="getAppointments();" style="background-color:#72b8f2">Filter</button>
            </div>
        </div>

        <div class="clearfix" style="margin: 10px 5px;"></div>


        <div class="row" ng-repeat="item in data">
 
            <div class="col-md-3" style="font-size: 14px;">
                <b>Date:  </b>{{item.DATE  | date:'EEEE'}} - {{item.DATE | date:'dd/MM/yyyy'}}<br>
                <button class="btn btn-sm" ng-click="timetable.add(item)">Add New</button>

                <button ng-if="item.list.length > 0" class="btn btn-sm" ng-click="timetable.getAllCalendarInDate(item)">Change Service</button>

                <button ng-if="item.list.length > 0" class="btn btn-sm btn-danger" ng-click="timetable.removeAllDay(item)" style="margin-top:5px;">Delete All</button>
                
                
            </div>
            <div  class="col-md-9">
                <table class="table table-bordered">
                    <thead>
                        <th>From Time</th>
                        <th>To Time</th>
                        <th>Site</th>
                        <th>Service</th>
                        <th>Action</th>
                    </thead>
                    <tbody>
                        <tr ng-repeat="cal in item.list">
                            <td>
                                <!-- <input ng-model="cal.FROM_TIME" name="from_time" 
                                custom-timepicker style="width: 50px;" readonly 
                                ng-change="changeCalendar({'data':l})"> -->

                                <input type="text" ui-mask="99:99" ng-model="cal.FROM_TIME" class="form-control" id="from_time" name="from_time" ng-change="changeCalendar({'data':l})">
                                
                            </td>
                            <td>
                                <!-- <input ng-model="cal.TO_TIME" name="from_time" 
                                custom-timepicker style="width: 50px;" readonly 
                                ng-change="changeCalendar({'data':l})"> -->

                                <input type="text" ui-mask="99:99" ng-model="cal.TO_TIME" class="form-control" id="to_time" name="to_time" ng-change="changeCalendar({'data':l})">
                            </td>
                            <td>
                                <select ng-model="cal.SITE_ID"
                                    ng-options="site.id as site.Site_name for site in options.redimedsites">
                                </select>
                            </td>
                            <td>
                                <select ng-model="cal.SERVICE_ID"
                                    ng-change="changeCalendar({'data':l})"
                                    ng-options="service.SERVICE_ID as service.SERVICE_NAME 
                                        for service in options.clinical_depts">
                                    <option value="" selected disabled>Service</option>
                                </select>
                            </td>
                            <td>
                            	<a ng-show="!cal.CAL_ID" ng-click="timetable.addRowData(item, cal)">
                                    <i class="fa fa-plus"></i>
                                </a>

                                <a ng-show="cal.CAL_ID" ng-click="timetable.updateRow(item, cal)">
                                    <i class="fa fa-floppy-o"></i>
                                </a>

                                <a ng-click="timetable.remove({cal: cal, parentIndex: $parent.$index, index: $index })">
                                    <i class="fa fa-times"></i>
                                </a>
                                
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
          
        </table>
    </div>
</div>

<!-- TANNV.DTS@GMAIL.COM ADD COMPONENT -->
<script type="text/ng-template" id="notifyToDeleteAllCalendarInDate">
    <div class="modal-body">
        <div ng-show="bookedList.length>0">
            <p>
                List appointment calendar have been booked:
            </p>
            <table class="table">
                <thead>
                    <tr>
                        <th>CAL ID</th>
                        <th>APPOINTMENT TIME</th>
                        <th>SERVICE</th>
                        <th>PATIENT NAME</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="booked in bookedList">
                        <td>{{booked.CAL_ID}}</td>
                        <td>{{booked.FROM_TIME|date:'HH:mm dd-MM-yyyy'}}</td>
                        <td>{{booked.SERVICE_NAME}}</td>
                        <td>{{booked.PATIENT_FULL_NAME}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p ng-hide="bookedList.length>0">Do you want to delete all calendar in date?</p>
        <p ng-show="bookedList.length>0">Do you want to delete all booked appointments and delete all calendar in date?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-xs" ng-click="ok()">OK</button>
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
</script>


<script type="text/ng-template" id="notifyToDeleteOneCalendar">
    <div class="modal-body">
        <p>Do you want to delete this appointment calendar?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-xs" ng-click="ok()">OK</button>
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
</script>


<script type="text/ng-template" id="notifyToDeleteSelectedCalendar">
    <div class="modal-body">
        <div ng-show="bookedList.length>0">
            <p>
                Appointment calendar have been booked:
            </p>
            <table class="table">
                <thead>
                    <tr>
                        <th>CAL ID</th>
                        <th>APPOINTMENT TIME</th>
                        <th>SERVICE</th>
                        <th>PATIENT NAME</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="booked in bookedList">
                        <td>{{booked.CAL_ID}}</td>
                        <td>{{booked.FROM_TIME|date:'HH:mm dd-MM-yyyy'}}</td>
                        <td>{{booked.SERVICE_NAME}}</td>
                        <td>{{booked.PATIENT_FULL_NAME}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p ng-show="bookedList.length>0">Do you want to delete this booked appointment calendar?</p>
        <p ng-hide="bookedList.length>0">Do you want to delete this calendar?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-xs" ng-click="ok()">OK</button>
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
</script>


<script type="text/ng-template" id="changeServiceOfCalendarsInDate">
    <div class="modal-body">
        <div>
            <p>
                Change Service
            </p>
            <form class="form-inline">
                <div class="form-group">
                    <label for="FROM_TIME">From time</label>
                    <select class="form-control" ng-model="updateData.FROM_TIME" id="FROM_TIME"
                        ng-options="calendar.FROM_TIME as calendar.FROM_TIME_DISPLAY 
                            for calendar in calendarsInDate">
                        <option value="" selected disabled>From time</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="TO_TIME">To time</label>
                    <select class="form-control" ng-model="updateData.TO_TIME" id="TO_TIME"
                        ng-options="calendar.FROM_TIME as calendar.FROM_TIME_DISPLAY 
                            for calendar in calendarsInDate">
                        <option value="" selected disabled>To time</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="SERVICE_ID">Service</label>
                    <select class="form-control" ng-model="updateData.SERVICE_ID" id="SERVICE_ID"
                        ng-options="service.SERVICE_ID as service.SERVICE_NAME 
                            for service in services">
                        <option value="" selected disabled>Service</option>
                    </select>
                </div>
            </form>
            <!-- <table class="table">
                <thead>
                    <tr>
                        <th>APPOINTMENT TIME</th>
                        <th>SERVICE</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="calendar in calendarsInDate">
                        <td>{{calendar.FROM_TIME|date:'HH:mm dd-MM-yyyy'}}</td>
                        <td>
                            <select ng-model="calendar.SERVICE_ID"
                      
                                ng-options="service.SERVICE_ID as service.SERVICE_NAME 
                                    for service in services">
                                <option value="" selected disabled>Service</option>
                            </select>
                        
                        </td>
                    </tr>
                </tbody>
            </table> -->
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-xs" ng-click="ok()">OK</button>
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
</script>
<!-- --------------------------------- -->
