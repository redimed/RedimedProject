<div class="portlet box red">
	<div class="portlet-title">
	    <div class="caption">
	        <i class="fa fa-medkit"></i> Invoice Detail
	    </div>
	    <div class="pull-right navbar-right">
            <button ng-click="clickAction()" class="un_tn_btn un_tn_btn_pink" ng-show="showSave"><i class="fa fa-save"></i> Save </button>
        </div>
	</div>
	<div class="portlet-body">
<div class="row" style="margin-top: 15px;">

	<!--Patient_id-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Patient</label>
			<div>
				<input disabled type="text" placeholder="Patient" class="form-control" 
				ng-model="InvoiceMap.patient.full_name" float-label>
			</div>
			<div style="position: absolute;right: 0;top: 0px;">
			<button  style="height: 32px;width: 40px;margin-right: 0px;" class="btn btn-block green" ng-click="patientSearch.open()">
				<i class="fa fa-search"></i>
			</button>
			</div>
		</span>	
	</div>
	<!--Patient_id-->

	<!--Company_id-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label for="company_id">Company</label>
			<input type="text" disabled placeholder="Company" ng-model="InvoiceMap.company.Company_name" class="form-control"float-label>
		</span>	
	</div>
	<!--Company_id-->

	<!--Insurer_id-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Insurer</label>
			<input type="text" disabled placeholder="Insurer" ng-model="InvoiceMap.insurer.insurer_name" class="form-control"  float-label>
		</span>	
	</div>
	<!--Insurer_id-->

	<!--SERVICE_ID-->
	<!-- <div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Service</label>
			<input type="text" disabled placeholder="Service" ng-model="InvoiceMap.service.SERVICE_NAME" class="form-control" float-label>
		</span>	
	</div> -->
	<!--SERVICE_ID-->
	<!--SERVICE_ID-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Service</label>
			<select class="form-control" name="SERVICE_ID" id="SERVICE_ID"
				ng-model="InvoiceMap.SERVICE_ID"
				ng-options="item.SERVICE_ID as item.SERVICE_NAME for item in opt_services" float-label>
			</select>
		</span>	
	</div>
	<!--SERVICE_ID-->

	<div class="break-row"></div>

	<!--SITE_ID-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Site</label>
			<!-- <input type="text" placeholder="Site" ng-model="InvoiceMap.site.Site_name" class="form-control" float-label> -->
			<select class="form-control" name="SITE_ID"
				ng-model="InvoiceMap.SITE_ID"
				ng-options="item.id as item.Site_name for item in options.redimedsites"  float-label>
			</select>
		</span>	
	</div>
	<!--SITE_ID-->

	<!--DEPT_ID-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Department</label>
			<!-- <input type="text" disabled placeholder="Department" ng-model="InvoiceMap.department.CLINICAL_DEPT_NAME" class="form-control" float-label> -->
			<select disabled class="form-control" name="DEPT_ID" id="DEPT_ID"
				ng-model="InvoiceMap.DEPT_ID"
				ng-options="item.CLINICAL_DEPT_ID as item.CLINICAL_DEPT_NAME for item in options.departments" float-label>
			</select>
		</span>	
	</div>
	<!--DEPT_ID-->

	<!--DOCTOR_ID-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label>Doctor</label>
			<div>
				<input type="text" disabled placeholder="Doctor"  ng-model="InvoiceMap.doctor.NAME" class="form-control"  float-label>
			</div>
			<div style="position: absolute;right: 0;top: 0px;">
				<button style="height: 32px;width: 40px;margin-right: 0px;" class="btn btn-block green" ng-click="doctorSearch.open()">
					<i class="fa fa-search"></i>
				</button>
			</div>
		</span>	
	</div>
	<!--DOCTOR_ID-->




	<!--cal_id-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<a ng-if="InvoiceMap.cal_id" ng-click="goToAppt(InvoiceMap.Patient_id, InvoiceMap.cal_id)" class="btn btn-primary btn-block"><i class="fa fa-calendar"></i> Appointment Detail</a>
	</div>
	<!--cal_id-->

	<div class="break-row"></div>

	<!--STATUS-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<span class="field">
			<label for="status">Status</label>
			<select class="form-control" name="STATUS"
				ng-model="InvoiceMap.STATUS"
				ng-options="item.code as item.label for item in options.invoice_status"
				ng-disabled="statusDisable">
			</select>
		</span>	
	</div>
	<!--STATUS-->

	<!--claim_id-->
	<div class="col-md-3 col-sm-6 col-xs-12">
		<!-- <button class="btn btn-block green" ng-click="patientClaim.open()">
			<span ng-if="!InvoiceMap.claim_id">
				<i class="fa fa-search"></i> Choose Claim
			</span>
		</button> -->
		<span class="field">
			<input ng-if="!InvoiceMap.claim_id" disabled type="text" value="No Claim" class="form-control" placeholder=".input-large">
			
			<input ng-if="InvoiceMap.claim_id" disabled type="text" ng-model="InvoiceMap.claim.Injury_name" class="form-control">

			<div style="position: absolute;top: 0;right: 0;" dropdown="">
				<button style="margin-right: 0px;height: 32px;" type="button" class="btn green dropdown-toggle"  ng-disabled="disabled" ng-disabled="disabled" aria-haspopup="true" aria-expanded="false" ng-show="claimShow">Claim <i class="fa fa-angle-down"></i></button>
				<ul class="dropdown-menu" role="menu">
					<li><a ng-click="patientClaim.open()"><i class="fa fa-search"></i> Choose Claim </a></li>
					<li><a><i class="fa fa-times"></i> Remove Claim</a></li>
				</ul>
			</div>
		</span>
	</div>
	<!--claim_id-->
	<div class="break-row"></div>
</div>


	</div>
</div>


<div class="portlet box red">
	<div class="portlet-title">
	    <div class="caption">
	        <i class="fa fa-medkit"></i> Invoice Items
	    </div>
	    <div class="pull-right navbar-right" ng-hide="statusDisable">
            <button ng-click="itemSearch.open()" class="un_tn_btn un_tn_btn_gray"><i class="fa fa-search">
            	</i> Choose Item 
        	</button>
            <button ng-click="clickAction()" class="un_tn_btn un_tn_btn_pink" ng-show="showSave"><i class="fa fa-save"></i> Save </button>
        </div>
	</div>
	<div class="portlet-body">
		<table class="table table-bordered">
			<tr>
				<th> Item No</th>
				<th> Item Name</th>
				<th> Time Spent </th>
				<th> Quantity </th>
				<th> Price </th>
				<th> Amount </th>
				<th>Actions</th>
			</tr>
			<tr ng-if="statusDisable" ng-repeat="item in InvoiceMap.lines" ng-show="item.IS_ENABLE != 0">
				<td>{{item.invItem.ITEM_CODE}}</td>
				<td>{{item.invItem.ITEM_NAME}}</td>
				<td>{{item.TIME_SPENT}}</td>
				<td>{{item.QUANTITY}}</td>
				<td class="text-right">${{item.PRICE}}</td>
				<td class="text-right">${{item.AMOUNT}}</td>
				<td class="text-right">
					<!-- <button class="un_tn_btn un_tn_btn_gray un_tn_btn_sm" ng-click="removeInvoiceLine(item)">
						Remove
					</button> -->
				</td>
			</tr>

			<tr ng-if="!statusDisable" ng-repeat="item in InvoiceMap.lines" ng-show="item.IS_ENABLE != 0">
				<td>{{item.invItem.ITEM_CODE}}</td>
				<td>{{item.invItem.ITEM_NAME}}</td>

				<td>
					<!-- <span ng-if="item.appt_item_id">{{item.TIME_SPENT}}</span>
					<input  ng-if="!item.appt_item_id" type="number" min="0" class="form-control" ng-model="item.TIME_SPENT" /> --> <!-- tannv.dts frame -->
					<input type="number" min="0" class="form-control" ng-model="item.TIME_SPENT" /> <!-- tannv.dts add -->
				</td>

				<td>
					<!-- <span ng-if="item.appt_item_id">{{item.QUANTITY}}</span>
					<input ng-if="!item.appt_item_id" type="number" min="0" class="form-control" ng-model="item.QUANTITY" /> --> <!-- tannv.dts frame -->
					<input type="number" min="0" class="form-control" ng-model="item.QUANTITY" /><!-- tannv.dts add -->
				</td>

				<td class="text-right">
					<!-- <span ng-if="item.appt_item_id">${{item.PRICE}}</span>
					<input ng-if="!item.appt_item_id" type="number" min="0" class="form-control" ng-model="item.PRICE" /> --> <!-- tannv.dts frame -->
					<input type="number" min="0" class="form-control" ng-model="item.PRICE" /><!-- tannv.dts add -->
				</td>
				<td class="text-right">${{item.PRICE * item.QUANTITY}}</td>
				<td class="text-right">
					<button class="un_tn_btn un_tn_btn_gray un_tn_btn_sm un_tn_btn_zip" ng-click="removeInvoiceLine(item)">
						Remove
					</button>
				</td>
			</tr>



			<tr>
				<td colspan="5"><strong> Total </strong></td>
				<td class="text-right">${{InvoiceMap.AMOUNT}}</td>
				<td class="text-right">
					
				</td>
			</tr>
		</table>
	</div>
</div>


<!-- POPUP PATIENT CLAIM -->
<div class="mdt-search" style="display: block;" ng-show="patientClaim.is_show">
    <div class="pull-right text-center ng-scope">
        <button class="btn btn-sm btn-block red" ng-click="patientClaim.close()">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <my-data-table options="patientClaim.options" rowclick="patientClaim.click"></my-data-table>
</div>
 <!-- END POPUP PATIENT CLAIM  -->

 <!-- POPUP SEARCH-ITEM  -->
<div class="mdt-search" style="display: block;" ng-if="itemSearch.is_show">
    <div class="pull-right text-center ng-scope">
        <button class="btn btn-sm btn-block red" ng-click="itemSearch.close()">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <my-data-table options="itemSearchOption" rowclass="itemSearch.class" rowclick="itemSearch.click"></my-data-table>
</div>
 <!-- POPUP SEARCH-ITEM  -->

 <!-- POPUP PATIENT SEARCH -->
<div class="mdt-search" style="display: block;" ng-show="patientSearch.is_show">
    <div class="pull-right text-center ng-scope">
        <button class="btn btn-sm btn-block red" ng-click="patientSearch.close()">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <patient-search click-row="patientSearch.click(row)"></patient-search>
</div>
 <!-- END POPUP PATIENT SEARCH  -->

<!-- POPUP DOCTOR SEARCH -->
<div class="mdt-search" style="display: block;" ng-show="doctorSearch.is_show">
    <div class="pull-right text-center ng-scope">
        <button class="btn btn-sm btn-block red" ng-click="doctorSearch.close()">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <mdtdoctor-search click-row="doctorSearch.click(row)"></mdtdoctor-search>
</div>
 <!-- END POPUP DOCTOR SEARCH  -->

 <script type="text/ng-template" id="notifyToRemoveInvoiceLine">
    <div class="modal-body">
        <p>Do you want to remove this item?</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary btn-xs" ng-click="ok()">OK</button>
        <button class="btn btn-warning btn-xs" ng-click="cancel()">Cancel</button>
    </div>
</script>