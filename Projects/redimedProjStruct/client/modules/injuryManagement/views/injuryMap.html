<style type="text/css">
    .rowWaiting {
        background-color: rgba(255, 220, 96, 0.44);
    }

    .rowDone {
        background-color: rgba(117, 255, 186, 0.35);
    }

    .img-image-name{
        width: 50px;
        height: 50px;
        border-radius: 50%;
        text-align: center;
        vertical-align: middle;
        display: table-cell;
        color: white;
        font-size: 40px;
        font-weight: lighter;
    }

    table {
        table-layout:fixed;
    }

    .div-table-content {
        height:600px;
        overflow-y:auto;
    }

</style>
<div class="tabbable-custom nav-justified">
    <ul class="un-tabs">
        <li class="active">
            <a href="injuryMap.html#tab_1_1_1" data-toggle="tab">
                <i class="icon-map"></i> &nbsp;&nbsp;&nbsp;
                Injury Map </a>
        </li>
       
    </ul>
    <div class="un-tabs-content">
        <div class="un-tab-content active" id="tab_1_1_1">
            <map  center="current-location" zoom="15">
                <custom-control  id="refresh" position="TOP_RIGHT" index="1" on-click="refreshMap()">
                    <div style="width: 75px;background-color: white;border-style: solid;border-width: 2px;cursor: pointer;text-align: center; margin-top: 5px">
                        Refresh Map
                    </div>
                </custom-control>
                <marker data-position="{{im.position}}" icon="{{im.icon}}" ng-repeat="im in injuryMarker" data-on-click="showInfoWindow(event, 'info')">
                    <info-window max-width="500" id="info">
                        <div class="portlet grey-cascade box">
                            <div class="portlet-title">
                                <div class="caption ">
                                    <span class="caption-subject uppercase">{{im.FullName}}</span>
                                </div>
                                <div class="actions">
                                    <a  ng-click="showDetails(im.id)"  href="javascript:;" class="btn green btn-sm">
                                        <i class="fa fa-pencil"></i>&nbsp;&nbsp;
                                        Details </a>
                                </div>

                            </div>
                            <div class="portlet-body">
                            <div ng-non-bindable="">
                            <div class="row">
                                <div class="col-md-3"> <label class="bold">Pickup At</label></div>
                                <div class="col-md-9">
                                    <label>{{im.pickupAddr}}</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> <label class="bold">Gender</label></div>
                                <div class="col-md-9">
                                    <label>{{im.gender}}</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> <label class="bold">Injury Desc</label></div>
                                <div class="col-md-9">
                                    <label>{{im.injuryDesc}}</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> <label class="bold">Status</label></div>
                                <div class="col-md-9">
                                    <span ng-show="im.status == 'New'" class="label label-md label-success">New </span>
                                    <span ng-show="im.status == 'Picking'" class="label label-md label-info">Waiting For Driver</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"> <label class="bold">Driver</label></div>
                                <div class="col-md-9">
                                    <label ng-show="im.status == 'Picking' || im.status == 'Picked'">{{im.driverUser}}</label>
                                    <select ng-model="selectedDriver.driverId" ng-show="im.status == 'New'" ng-options="a.driverId as a.username for a in driverMarker | unique:'driverId'">
                                        <option value="">--Select Driver--</option>
                                    </select>

                                </div>
                            </div>
                                <br/>
                            <div class="clearfix">
                                <a  ng-class="{disabled:selectedDriver.driverId == null}" ng-show="im.status == 'New'"  ng-click="allocateDriver(im)"  href="javascript:;" class="btn blue btn-block">
                                    Send Notification </a>
                                </div>
                            </div>
                                </div>
                        </div>
                    </info-window>
                </marker>
                <marker  data-position="{{d.position}}" icon="{{d.icon}}" ng-repeat="d in driverMarker" data-on-click="showInfoWindow(event, 'infoDriver')">
                    <info-window max-width="500" id="infoDriver">
                        <div class="portlet red-flamingo box">
                            <div class="portlet-title">
                                <div class="caption ">
                                    <span class="caption-subject uppercase">{{d.username}}</span>
                                </div>
                            </div>
                            <div class="portlet-body">
                        <div ng-non-bindable="">
                            <div class="row" >
                                <div class="col-md-5"> <label class="bold">Picking: </label></div>
                                <div class="col-md-7" >
                                    <label>{{d.patientList.length}} Patient(s)</label>
                                </div>
                            </div>
                            <div class="row" ng-repeat="p in d.patientList">
                                <div class="col-md-2">{{$index + 1}}.</div>
                                <div class="col-md-10" >
                                    <label>{{p.FullName}}</label>
                                </div>
                            </div>

                        </div>
                                </div>
                            </div>
                    </info-window>
                </marker>
            </map>

        </div>
        
    </div>
</div>



