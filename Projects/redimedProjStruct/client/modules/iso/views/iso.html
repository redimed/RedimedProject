<h2 id="demo1">REDiMED ISO SYSTEM</h2>
<div>
    R:Read. C:Create. U:Update. D:Delete. G: Grant Permission
</div>      
<div class="tree well">

    <script type="text/ng-template" id="nodes_renderer.html">
        <span >
                <i ng-if="node.nodes" class="fa fa-minus"></i>
                <i ng-if="node.NODE_TYPE==nodeType.folder" class="fa fa-folder-open"></i>
                <i ng-if="node.NODE_TYPE==nodeType.document" class="fa fa-leaf"></i>
                {{node.NODE_NAME}}
                <!-- ____{{node.relativePath}} -->
        </span>
        <div style="color:#800000;display:inline;font-size:11px">
           
           {{node.ACCESSIBLE_USER_ID?'(':''}}
           {{node.PERMISSION==0?'A':''}}
           {{node.PERMISSION==1?'C':''}}
           {{node.PERMISSION==2?'U':''}}
           {{node.PERMISSION==3?'R':''}}
           {{node.ACCESSIBLE_USER_ID?')':''}}
           
        </div>
        <a ng-show="node.ACCESSIBLE_USER_ID" ng-click="showTreeActionsMenuPopup(node);">actions </a>    
        
        <ul>
            <li ng-class="{node_accessible:node.ACCESSIBLE_USER_ID}" ng-repeat="(key,node) in node.nodes" iso-notice-finish-render-directory-tree ng-include="'nodes_renderer.html'">
            </li>
        </ul>
    </script>

    <ul>
        <li ng-class="{node_accessible:node.ACCESSIBLE_USER_ID}" ng-repeat="(key,node) in treeData"  ng-include="'nodes_renderer.html'">
        </li>
    </ul>

    
</div>


<div  id="iso-tree-actions-menu-popup" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">{{selectedTreeNode.NODE_TYPE==nodeType.folder?'Folder Actions':'File Actions'}}</h4>
            </div>  
            <div class="modal-body">
                <div ng-show='selectedTreeNode.NODE_TYPE==nodeType.folder'>
                    <div class='iso-action-group'>
                        <button 
                            type="button" 
                            class="btn btn-default"
                            ng-click="showTreeActionContentPopup(treeActions.createFolder.name);">Create Folder
                        </button>

                        <button
                            type="button" 
                            class="btn btn-default"
                            ng-click="">Delete Folder
                        </button>

                        <button
                            type="button" 
                            class="btn btn-default"
                            ng-click="">Clone to PC
                        </button>

                    </div>

                    <div class='iso-action-group'>
                        <button
                            type="button" 
                            class="btn btn-default"
                            ng-click="showTreeActionContentPopup(treeActions.grantNodePermission.name);">Grant Permission
                        </button>
                    </div>

                    <div class='iso-action-group'>
                        <button 
                            type="button" 
                            class="btn btn-default"
                            ng-click="showTreeActionContentPopup(treeActions.createDocument.name);">Create Document
                        </button>
                    </div>
                    
                </div>


                <div ng-show='selectedTreeNode.NODE_TYPE==nodeType.document'>
                    <div class='iso-action-group'>
                        <button 
                            ng-show="selectedTreeNode.IS_UPDATE"
                            type="button" 
                            class="btn btn-default"
                            ng-click="checkOutDocument();">Check out
                        </button>
                        <button 
                            ng-show="selectedTreeNode.IS_UPDATE"
                            type="button" 
                            class="btn btn-default"
                            ng-click="beforeCheckIn();">Check in
                        </button>
                        <button 
                            ng-show="selectedTreeNode.IS_UPDATE"
                            type="button" 
                            class="btn btn-default"
                            ng-click="SubmitDocument()">Submit Document
                        </button>
                    </div>

                    <div class='iso-action-group'>
                        <button 
                            ng-show="selectedTreeNode.IS_DELETE"
                            type="button" 
                            class="btn btn-default"
                            ng-click="">Delete Document
                        </button>
                        <button 
                            ng-show="selectedTreeNode.IS_GRANT_PERMISSION"
                            type="button" 
                            class="btn btn-default"
                            ng-click="">Grant Permission
                        </button>
                    </div>

                    <div class='iso-action-group'>
                        <button 
                            ng-show="selectedTreeNode.IS_READ"
                            type="button" 
                            class="btn btn-default"
                            ng-click="">Download Newest Version
                        </button>
                    </div>
                </div>
            </div>


            
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div  id="iso-tree-action-content-popup" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Run</h4>
            </div>
            <div class="modal-body">
                <div ng-include='currentTreeAction.url'>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div ng-include="'modules/iso/views/templates/iso.html/iso_page_template.html'">

</div>

<div class="otherpage">
    

</div>

<button ng-click='grantNodePermissionItem(64,16,1);'>
    Test Remote
</button>