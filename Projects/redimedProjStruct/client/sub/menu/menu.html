<div class="portlet light">
    <div class="portlet-title">

        <!--<p><strong>Page:</strong> {{tableParams.page()}}-->
        <!--<p><strong>Count per page:</strong> {{tableParams.count()}}-->
        <div class="caption">
            <i class="icon-list font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">Root Menus</span>

        </div>

        <div>
            <div class="btn-group pull-right">
                <a href="#" class="btn green" id="addMenu">
                    Add New<i class="fa fa-plus"></i>
                </a>
            </div>
        </div>

        <script type="text/javascript">
            $('#modal-content').on('shown.bs.modal', function () {
                $("#txtDescription").focus();
            });

            // everytime the button is pushed, open the modal, and trigger the shown.bs.modal event
            $('#addMenu').click(function () {
                $('#modal-content').modal({
                    show: true
                });
            });
            $('#addSub').click(function () {
                $('#insertSubMenu').modal({
                    show: true
                });
            });
        </script>

        <div>
            <table ng-table="tableParams"  show-filter="true" class="table table-striped table-hover table-bordered ng-table-responsive">
                <tr ng-repeat="m in $data | orderBy:'MenuID'" ng-click="showChild(m)">
                    <td data-title="'Description'" sortable="'MenuDescription'" filter="{ 'MenuDescription': 'text' }">
                        <span ng-if="!m.$edit">{{m.MenuDescription}}</span>
                        <div ng-if="m.$edit"><input class="form-control" type="text" ng-model="m.MenuDescription" /></div>
                    </td>
                    <td data-title="'Type'" sortable="'MenuType'" filter="{ 'MenuType': 'text' }">
                        <span ng-if="!m.$edit">{{m.MenuType}}</span>
                        <div ng-if="m.$edit"><input class="form-control" type="text" ng-model="m.MenuType" /></div>
                    </td>
                    <td data-title="'Enable'" >
                        <span ng-if="m.MenuEnable===1 && !m.$edit" ><input  class="form-control" type="checkbox" disabled   checked /></span>
                        <span ng-if="m.MenuEnable!==1 && !m.$edit" ><input  class="form-control" type="checkbox" disabled  /></span>
                        <span ng-if="m.MenuEnable===1 && m.$edit" ><input  class="form-control" type="checkbox" ng-model="m.MenuEnable" ng-checked="true" ng-true-value="1" ng-false-value="0" /></span>
                        <span ng-if="m.MenuEnable!==1 && m.$edit" ><input  class="form-control" type="checkbox" ng-model="m.MenuEnable" ng-true-value="1" ng-false-value="0" /></span>
                    </td>
                    <td data-title="'Actions'">
                        <a href="javascript:;" ng-if="!m.$edit"
                           ng-click="edit(m)">
                            Edit </a>
                        <a href="javascript:;" ng-if="m.$edit"
                           ng-click="save(m)">
                            Save </a>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="javascript:;" ng-if="m.$edit"
                           ng-click="cancel(m)">
                            Cancel </a>
                    </td>

                </tr>


            </table>
        </div>

        <div id="modal-content" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        <h4 class="modal-title">Add New Menu</h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label class="control-label">Description</label>
                                <div>
                                    <input type="text" class="form-control" id="txtDescription" placeholder="Enter Description" ng-model="menu.description" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="control-label">Definition</label>
                                <div >
                                    <input type="text" class="form-control" placeholder="Enter Definition" ng-model="menu.definition" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="control-label">Type</label>
                                <div >
                                    <input type="text" class="form-control" placeholder="Enter Type" ng-model="menu.type" />
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="form-group">
                                <label class="control-label">Enable</label>
                                <div >
                                    <input type="checkbox" class="form-control" ng-model="menu.isEnable" ng-true-value="1" ng-false-value="0" />
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
                        <a href="javascript:;" class="btn green" ng-click="addNew()">Insert</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!--Child Menu -->
<div class="portlet light">
    <div class="portlet-title">

        <!--<p><strong>Page:</strong> {{tableParams.page()}}-->
        <!--<p><strong>Count per page:</strong> {{tableParams.count()}}-->
        <div class="caption">
            <i class="icon-list font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">{{childTitle}}</span>

        </div>

        <div>
            <div class="btn-group pull-right" ng-show="isSelected">
                <a href="#"  class="btn green" id="addSub">
                    Add New <i class="fa fa-plus"></i>
                </a>
            </div>
        </div>

        <div>
            <table ng-table="tableParams2"  show-filter="true" class="table table-striped table-hover table-bordered ng-table-responsive">
                <tr ng-repeat="c in $data | orderBy:'MenuID'">
                    <td data-title="'Description'" sortable="'MenuDescription'" filter="{ 'MenuDescription': 'text' }">
                        <span ng-if="!c.$edit">{{c.MenuDescription}}</span>
                        <div ng-if="c.$edit"><input class="form-control" type="text" ng-model="c.MenuDescription" /></div>
                    </td>
                    <td data-title="'Type'" sortable="'MenuType'" filter="{ 'MenuType': 'text' }">
                        <span ng-if="!c.$edit">{{c.MenuType}}</span>
                        <div ng-if="c.$edit"><input class="form-control" type="text" ng-model="c.MenuType" /></div>
                    </td>
                    <td data-title="'Function'">
                        <span ng-if="!c.$edit">{{c.FunctionName}}</span>
                        <select ng-if="c.$edit" ng-model="c.FunctionID" ng-options="func.function_id as func.decription for func in functionList"></select>
                    </td>
                    <td data-title="'Enable'" >
                        <span ng-if="c.MenuEnable===1 && !c.$edit" ><input  class="form-control" type="checkbox" disabled   checked /></span>
                        <span ng-if="c.MenuEnable!==1 && !c.$edit" ><input  class="form-control" type="checkbox" disabled  /></span>
                        <span ng-if="c.MenuEnable===1 && c.$edit" ><input  class="form-control" type="checkbox" ng-model="c.MenuEnable" ng-checked="true" ng-true-value="1" ng-false-value="0" /></span>
                        <span ng-if="c.MenuEnable!==1 && c.$edit" ><input  class="form-control" type="checkbox" ng-model="c.MenuEnable" ng-true-value="1" ng-false-value="0" /></span>
                    </td>
                    <td data-title="'Actions'">
                        <a href="javascript:;" ng-if="!c.$edit"
                           ng-click="editChild(c)">
                            Edit </a>
                        <a href="javascript:;" ng-if="c.$edit"
                           ng-click="saveChild(c)">
                            Save </a>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="javascript:;" ng-if="c.$edit"
                           ng-click="cancelChild(c)">
                            Cancel </a>
                    </td>

                </tr>


            </table>
        </div>

        <div id="insertSubMenu" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                        <h4 class="modal-title">Add {{childTitle}} Sub Menu</h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label class="control-label">Description</label>
                                <div>
                                    <input type="text" class="form-control" placeholder="Enter Description" ng-model="child.description" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="control-label">Type</label>
                                <div >
                                    <input type="text" class="form-control" placeholder="Enter Type" ng-model="child.type" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <label class="control-label">Function</label>
                                <div >
                                    <select ng-model="child.functionId" ng-options="func.function_id as func.decription for func in functionList"></select>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="form-group">
                                <label class="control-label">Enable</label>
                                <div >
                                    <input type="checkbox" class="form-control" ng-model="child.isEnable" ng-true-value="1" ng-false-value="0" />
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
                        <a href="javascript:;" class="btn green" ng-click="addNewChild()">Insert</a>
                    </div>
                </div>
            </div>
        </div>


    </div>

</div>

