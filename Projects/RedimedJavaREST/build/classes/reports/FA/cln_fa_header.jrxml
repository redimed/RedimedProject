<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="cln_fa_header" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d37529f3-011d-4085-8535-427c83c8b554">
	<property name="ireport.zoom" value="1.1000000000000016"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter "/>
	<import value="javax.imageio.ImageIO"/>
	<import value="org.apache.commons.codec.binary.Base64"/>
	<parameter name="patient_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="cal_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="key" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="real_path" class="java.lang.String">
		<defaultValueExpression><![CDATA["/LocalData/RedimedProject/Projects/RedimedJavaREST/src/reports/FA/"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{real_path}]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select DISTINCT 	header.*,patient.`First_name`,patient.`Sur_name`,patient.`Middle_name`,	patient.`DOB`,
YEAR(CURDATE())- YEAR(patient.DOB) AS PATIENT_AGE, SUBSTRING_INDEX(header.`ASSESSED_SIGN`, ',', -1) AS  'ASSESSED_SIGN_1',
SUBSTRING_INDEX(header.`PATIENT_SIGN`, ',', -1) AS  'PATIENT_SIGN_1'
from 	`cln_fa_df_headers` header left join `cln_patients` patient on header.`PATIENT_ID`=patient.`Patient_id`
where 	header.`ISENABLE`=1
	and
	header.`PATIENT_ID`=$P{patient_id}
	and
	header.`CAL_ID`=$P{cal_id}
	and
	header.`FA_ID`=$P{key}]]>
	</queryString>
	<field name="PATIENT_ID" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="CAL_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="FA_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ENTITY_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="TYPE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="FA_NAME" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISENABLE" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ITEM_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Created_by" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Creation_date" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Last_updated_by" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Last_update_date" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Risk" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Comments" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Recommend" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Flexibility" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Core_Stability" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Wirst_Elbow_func" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Shoulder_func" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Lower_Limb_func" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Att_Balance" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ASSESSED_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ASSESSED_SIGN" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ASSESSED_DATE" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ASSESSED_NAME" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PATIENT_SIGN" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="can_perform_today" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="First_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Sur_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Middle_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="DOB" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PATIENT_AGE" class="java.lang.Long"/>
	<field name="ASSESSED_SIGN_1" class="java.lang.String"/>
	<field name="PATIENT_SIGN_1" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="85">
			<image hAlign="Center" vAlign="Middle">
				<reportElement x="389" y="0" width="166" height="49" uuid="3a9032aa-54b5-4fe6-bb3f-f9e5580e1a27"/>
				<imageExpression><![CDATA[$P{real_path}+"rediLogo.png"]]></imageExpression>
			</image>
			<textField>
				<reportElement x="230" y="48" width="325" height="37" uuid="01834830-dfea-4bdd-a407-dedb2c66b57d"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{FA_NAME}!=null && $F{FA_NAME}!="")?$F{FA_NAME}:""]]></textFieldExpression>
			</textField>
			<frame>
				<reportElement x="0" y="0" width="230" height="60" uuid="0ac1c127-98c5-4583-900b-6aee41aa42d0"/>
				<box>
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<staticText>
					<reportElement x="0" y="10" width="101" height="23" uuid="4cf02224-1d75-4ca8-93e8-60dc2a225815"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Name:]]></text>
				</staticText>
				<textField>
					<reportElement x="105" y="10" width="125" height="23" uuid="ed306cb7-953d-425c-8660-2976c9629cb8"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[($F{First_name}!=null?$F{First_name}+" ":"")
+
($F{Middle_name}!=null?$F{Middle_name}+" ":"")
+
($F{Sur_name}!=null?$F{Sur_name}:"")]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="38" width="101" height="20" uuid="ee6e7787-37a4-435e-8766-8cc0b728810d"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true" isItalic="false"/>
					</textElement>
					<text><![CDATA[Date of birth:]]></text>
				</staticText>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="105" y="37" width="100" height="20" uuid="894f6ff8-9dc2-4f98-a390-c35761c935d2"/>
					<textElement verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$F{DOB}]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</pageHeader>
	<detail>
		<band height="262" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="90" uuid="30a71399-cd16-414e-b3f7-bc09f7dc88cc"/>
				<text><![CDATA[This assessment is designed to test your functional capacity in relation to the required physical demands to complete your proposed role. You will not be required to complete any task that you feel you are unable to perform safely and or confidently. The evaluator will cease the assessment if they are of the opinion that you are either unable or unsafe to proceed. You are expected to set your own limits and cease any task if you experience pain or fear that the task will exacerbate any pre-existing injuries or conditions. You will be given a comprehensive set of instructions prior to commencing each task and you may ask for clarification at any point prior attempting the task. ]]></text>
			</staticText>
			<subreport>
				<reportElement x="0" y="139" width="555" height="51" uuid="8c5d48fb-f1dc-4c64-b753-ba617beacc75"/>
				<subreportParameter name="patient_id">
					<subreportParameterExpression><![CDATA[$P{patient_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="cal_id">
					<subreportParameterExpression><![CDATA[$P{cal_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="fa_id">
					<subreportParameterExpression><![CDATA[$P{key}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="real_path">
					<subreportParameterExpression><![CDATA[$P{real_path}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="sub_report_dir">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="patient_age">
					<subreportParameterExpression><![CDATA[$F{PATIENT_AGE}.toString()]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{real_path}+"cln_fa_section_types.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="190" width="555" height="52" uuid="def6b8b6-aeaa-4526-9e1c-b1b3ba8fb887"/>
				<subreportParameter name="patient_id">
					<subreportParameterExpression><![CDATA[$P{patient_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="cal_id">
					<subreportParameterExpression><![CDATA[$P{cal_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="real_path">
					<subreportParameterExpression><![CDATA[$P{real_path}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="sub_report_dir">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="fa_id">
					<subreportParameterExpression><![CDATA[$F{FA_ID}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{real_path}+"cln_fa_summary.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement x="0" y="90" width="420" height="15" uuid="f5240064-d0b2-4299-9a27-8a443c79ad7b">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<text><![CDATA[Is there any reason that you could not perform the work fitness assessment today?]]></text>
			</staticText>
			<staticText>
				<reportElement x="443" y="90" width="25" height="15" uuid="306d98fe-b828-4f5c-9610-83d301f5e987">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<text><![CDATA[Yes]]></text>
			</staticText>
			<staticText>
				<reportElement x="490" y="90" width="25" height="15" uuid="37bfea51-1f37-43aa-93fc-9505253f8109">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<text><![CDATA[No]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="110" width="80" height="15" uuid="601117f4-5adf-4fec-bfef-d753e03e1d81">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Signed:]]></text>
			</staticText>
			<staticText>
				<reportElement x="340" y="110" width="40" height="15" uuid="727f3805-7eaf-496e-a124-66f3b13b836e">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date:]]></text>
			</staticText>
			<textField pattern="d/M/yyyy">
				<reportElement x="385" y="106" width="100" height="22" uuid="34a85066-ee61-41bd-b141-873cad5480f1">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[($F{ASSESSED_DATE}!=null && $F{ASSESSED_DATE}!="")?$F{ASSESSED_DATE}:""]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="90" y="105" width="100" height="24" uuid="93081fe2-4b65-4028-bd32-0622b93007ef"/>
				<imageExpression><![CDATA[ImageIO.read(new ByteArrayInputStream(new Base64().decodeBase64($F{PATIENT_SIGN_1}.getBytes("UTF-8"))))]]></imageExpression>
			</image>
			<image>
				<reportElement x="471" y="90" width="15" height="15" uuid="63a8c8e7-db65-4dd7-b718-a5993951815f">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<imageExpression><![CDATA[$F{can_perform_today}!= null && $F{can_perform_today}== 0?$P{real_path}+"checked.png":$P{real_path}+"uncheck.png"]]></imageExpression>
			</image>
			<image>
				<reportElement x="426" y="90" width="15" height="15" uuid="92eb55e9-f545-4ee0-bbfb-20e937d0ae25">
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
				</reportElement>
				<imageExpression><![CDATA[$F{can_perform_today}!= null && $F{can_perform_today}== 1?$P{real_path}+"checked.png":$P{real_path}+"uncheck.png"]]></imageExpression>
			</image>
		</band>
		<band height="41">
			<staticText>
				<reportElement x="0" y="18" width="80" height="15" uuid="8c415c0c-9234-473d-bd5c-3eadc908e729">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Assessed by:]]></text>
			</staticText>
			<textField pattern="MMMM d, yyyy">
				<reportElement x="90" y="14" width="100" height="22" uuid="25bf8203-b564-4cde-a9cb-a2c74f1eb6d7">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[($F{ASSESSED_NAME}!=null && $F{ASSESSED_NAME}!="")?$F{ASSESSED_NAME}:""]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="210" y="18" width="50" height="15" uuid="2e82a62c-2895-40b0-a6dd-799ffc32f61a">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Signed:]]></text>
			</staticText>
			<image>
				<reportElement x="260" y="0" width="100" height="33" uuid="0c4426ad-c3d9-4283-807d-fecc880e9a3f"/>
				<imageExpression><![CDATA[ImageIO.read(new ByteArrayInputStream(new Base64().decodeBase64($F{ASSESSED_SIGN_1}.getBytes("UTF-8"))))]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="403" y="18" width="40" height="15" uuid="033d1057-947c-468e-b7fa-fec89a882e76">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date:]]></text>
			</staticText>
			<textField pattern="d/M/yyyy">
				<reportElement x="448" y="14" width="100" height="22" uuid="84405590-faf1-416d-a563-8b819ce73911">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[($F{ASSESSED_DATE}!=null && $F{ASSESSED_DATE}!="")?$F{ASSESSED_DATE}:""]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20" uuid="387884de-7e8c-42c9-92b0-a33d7e985c3f"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Â©REDiMED Pty Ltd.]]></text>
			</staticText>
			<textField evaluationTime="Report">
				<reportElement x="536" y="0" width="19" height="20" uuid="ea8b4ce3-0d94-4b84-be4a-853924544088"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="516" y="0" width="20" height="20" uuid="21811f6f-7dfe-4f67-b6a3-594e1839cbab"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[of]]></text>
			</staticText>
			<textField>
				<reportElement x="455" y="0" width="61" height="20" uuid="27e13438-6e1b-44f9-b50e-ebd0c035fd7b"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
