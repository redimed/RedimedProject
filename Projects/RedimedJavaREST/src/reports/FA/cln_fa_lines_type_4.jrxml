<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="cln_fa_lines_type_4" pageWidth="575" pageHeight="842" columnWidth="555" leftMargin="0" rightMargin="20" topMargin="0" bottomMargin="0" uuid="23f778ad-1c85-4f7e-ad8f-c7f4eeb3e2ca">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="New Data Adapter "/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="patient_id" class="java.lang.String"/>
	<parameter name="cal_id" class="java.lang.String"/>
	<parameter name="real_path" class="java.lang.String"/>
	<parameter name="sub_report_dir" class="java.lang.String"/>
	<parameter name="line_id" class="java.lang.String"/>
	<parameter name="patient_age" class="java.lang.String"/>
	<queryString>
		<![CDATA[select line.*,patient.Sex as Patient_Gender,
SUBSTRING(line.`PICTURE`,3) as PICTURE_REPORT
from `cln_fa_df_lines` line
inner join `cln_patients` patient on line.PATIENT_ID = patient.PATIENT_ID
where line.PATIENT_ID = $P{patient_id}
and line.CAL_ID = $P{cal_id}
and line.LINE_ID =  $P{line_id}
and line.LineType != 1
and line.SCORE_TYPE1=4]]>
	</queryString>
	<field name="PATIENT_ID" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="CAL_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="LINE_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SECTION_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="FA_ID" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="QUESTION" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="PICTURE" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISSCORE1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SCORE_TYPE1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SCORE1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISRATING1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATING_ID1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATING_VALUE1" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="COMMENTS" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ORD" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISSCORE2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SCORE_TYPE2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SCORE2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISRATING2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATING_ID2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATING_VALUE2" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ISENABLE" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Created_by" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Creation_date" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Last_updated_by" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Last_update_date" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="IsCommentsText" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="LineType" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATE1" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="RATE2" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="VAL1_NAME_HEADER" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="VAL1_VALUE_HEADER" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="VAL2_NAME_HEADER" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="VAL2_VALUE_HEADER" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="IS_SHOW_RANKING_TABLE" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="Patient_Gender" class="java.lang.String"/>
	<field name="PICTURE_REPORT" class="java.lang.String"/>
	<group name="lines_type_4_group">
		<groupHeader>
			<band height="35">
				<textField>
					<reportElement x="0" y="13" width="555" height="22" uuid="95ead75c-dc63-4da2-97aa-669ddafbe7fd"/>
					<textElement verticalAlignment="Middle">
						<font isBold="true" isUnderline="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{QUESTION}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<detail>
		<band height="67">
			<staticText>
				<reportElement x="125" y="0" width="95" height="34" uuid="c4760d80-0f19-4b6e-9761-e304a9369677"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Time]]></text>
			</staticText>
			<staticText>
				<reportElement x="125" y="35" width="95" height="16" uuid="c9bb9df4-b55e-4c99-a820-ef60b8db0978"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0" lineColor="#F0F0F0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0" lineColor="#F0F0F0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[HR]]></text>
			</staticText>
			<staticText>
				<reportElement x="125" y="51" width="95" height="16" uuid="374a7b15-d4b7-4429-97da-e916574d9724"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[COMMENTS]]></text>
			</staticText>
			<textField>
				<reportElement x="220" y="51" width="335" height="16" uuid="77455a89-b630-4295-81a4-7e41b2d9754d"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{RATE1}]]></textFieldExpression>
			</textField>
			<subreport>
				<reportElement x="220" y="0" width="335" height="51" uuid="5040fe0d-fb84-49ba-b267-b8977b7c15b2"/>
				<subreportParameter name="patient_id">
					<subreportParameterExpression><![CDATA[$P{patient_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="cal_id">
					<subreportParameterExpression><![CDATA[$P{cal_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="real_path">
					<subreportParameterExpression><![CDATA[$P{real_path}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="sub_report_dir">
					<subreportParameterExpression><![CDATA[$P{sub_report_dir}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="line_id">
					<subreportParameterExpression><![CDATA[$F{LINE_ID}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{real_path}+"cln_fa_lines_type_4_details.jasper"]]></subreportExpression>
			</subreport>
			<image>
				<reportElement x="4" y="0" width="121" height="67" uuid="b48177ce-dceb-4ed9-a564-2c6c0fa1a81b"/>
				<imageExpression><![CDATA[$P{real_path}+$F{PICTURE_REPORT}]]></imageExpression>
			</image>
		</band>
		<band height="32">
			<textField>
				<reportElement x="300" y="0" width="255" height="16" uuid="5ab032f4-2110-417f-9ee8-e9ae8d95ce74"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Age predicted max HR max: "+(220-Integer.parseInt($P{patient_age}))+" (220-Age)"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="300" y="16" width="255" height="16" uuid="ca7f8b31-ba93-4e46-ad88-d575001018be"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["85% max HR: "+85*(220-Integer.parseInt($P{patient_age}))/100+" bpm"]]></textFieldExpression>
			</textField>
		</band>
		<band height="62">
			<printWhenExpression><![CDATA[$F{IS_SHOW_RANKING_TABLE}==1]]></printWhenExpression>
			<subreport>
				<reportElement x="0" y="0" width="555" height="60" uuid="75feb5c5-5e8c-455f-b136-be8644fc5651"/>
				<subreportParameter name="ranking_header_id_1">
					<subreportParameterExpression><![CDATA[$F{RATING_ID1}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="score_1">
					<subreportParameterExpression><![CDATA[$F{SCORE1}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="patient_gender">
					<subreportParameterExpression><![CDATA[$F{Patient_Gender}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="patient_age">
					<subreportParameterExpression><![CDATA[$P{patient_age}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{real_path}+"cln_rankings.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
